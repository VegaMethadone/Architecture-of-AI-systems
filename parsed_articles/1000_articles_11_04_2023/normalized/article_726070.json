{
    "article_id": "726070",
    "article_name": "Партицирование в Greenplum 7: что нового",
    "content": "greenplum 7  первый версия субд совместимый секционированный таблица postgresql world db небольшой предыстория postgresql 10 партицирование postgresql выполняться очень ограниченный форма суть просто вариант наследование таблица начинать postgresql 10 мочь использовать декларативный синтаксис определение парадигма раздел рамка слияние postgresql 12 greenplum 7 вбирать весь синтаксис postgresql разбиение таблица сохранять синтаксис greenplum результат greenplum 7 шанс взять хороший оба мир  именно обсуждать статья новый синтаксис прежде начинать разбирать новый greenplum 7 предлагать обсуждать оставаться изменение postgresql иметь объявление ключ партицирование greenplum   partition by  оно присутствовать greenplum 7 также postgresql стратегия разбиение  range   list  который greenplum продолжать поддерживать новый версия важный отличие greenplum 7 позволять определять секционированный таблица определение дочерний раздел например create table sales id int date date amt decimal102 distributed by id partition by range date команда  create table  partition by  создавать родительский секционированный таблица какихлибо дочерний раздел дочерний раздел greenplum 7  это таблица первый класс который создавать помощь отдельный команда рассматривать следующий раздел dwhна основеgreenplum стратегия разделение хеш помимо существующий стратегия партицирование  range   list  greenplum 7 поддерживать партицирование  hash  стратегия работать postgresql пример создание хэшсекционированный таблица ее дочерний раздел  create a tabled partitioned by hash strategy create table sales_by_hour id int date date hour int amt decimal102 distributed by id partition by hash hour   every hash partition modulus must be a factor of the next larger modulus create table sales_by_hour_1 partition of sales_by_hour for values with modulus 24 remainder 0 create table sales_by_hour_2 partition of sales_by_hour for values with modulus 24 remainder 1 create table sales_by_hour_3 partition of sales_by_hour for values with modulus 24 remainder 2  новый ddl обсуждать основной дополнение greenplum 7 связывать ddl create table partition of  создавать новый таблица добавлять ее качество дочерний раздел create table jan_sales partition of sales  for values from 20230101 to 20230201 alter table attach partition  добавлять существующий таблица качество новый дочерний раздел create table feb_sales like sales  alter table sales attach partition feb_sales  for values from 20240201 to 20240301 alter table detach partition  удалять таблица иерархия партицирование удаление сам таблица alter table sales detach partition jan_sales новый каталог вспомогательный функция информация раздел храниться каталог  pg_partitioned_table  дополнительный поле  pg_class  relispartition relpartbound также мочь использовать новый вспомогательный функция основной ветка разработка  pg_partition_ancestorsrel   pg_partition_rootrel   pg_partition_treerel  старый таблица каталог связывать партицирование  pg_partition pg_partition_rule уходить функция  pg_partition_def   new catalog for partitioned tables select  from pg_partitioned_table where partrelid  salesregclass  partrelid  partstrat  partnatts  partdefid  partattrs  partclass  partcollation  partexprs      156181  r                  1          0  2          3122       0              1 row   a convenient helper routine to check the partition hierarchy select pg_partition_treesales          pg_partition_tree   salesf0  jan_salessalest1  sales_1_prt_feb_salessalest1  sales_1_prt_mar_salessalest1 4 rows новый воркфлоу один самый важный вещь который нужно знать новый синтаксис заключаться предоставлять рабочий процесс альтернативный рано делать легасикоманда greenplum  это значить новый синтаксис становиться сложный  все наоборот новый синтаксис простой использование большинство случай помощь просто реализовать определенный парадигма раздел включая выполнение задача который решать старый команда ниже приводить несколько пример важно понимать новый синтаксис заменять старый поэтому должный понимать оба группа синтаксис особенно различие подбирать наиболее подходящий команда свой нужда создание дочерний раздел вместе родительский greenplum создавать дочерний раздел вместе родительский таблица create table sales id int date date amt decimal102 distributed by id partition by range date partition jan_sales start 20230101 end 20230201 partition feb_sales start 20230201 end 20230301 default partition other_sales postgresql аналогичный команда вместо сначала создаваться родительский секционировать таблица затем отдельно добавляться дочерний секция create table sales id int date date amt decimal102 distributed by id partition by range date   add partition individually create table jan_sales partition of sales for values from 20230101 to 20230201 create table feb_sales partition of sales for values from 20230201 to 20230301 create table other_sales partition of sales default создание добавление дочерний раздел alter table add partition   create table partition of  одновременно создавать добавлять новый дочерний таблица однако поскольку  create table partition of  являться команда  create table  отличие  add partition  который являться подкоманда  altertable  помощь  create table  partition of  указывать дополнительный параметр создание таблица  add partition  обычно наследовать родительский таблица  create table allows you to specify more options create table jan_sales partition of sales for values from 20230101 to 20230201 using ao_row  withcompresstypezlib   add partition does the creation but have to specify options in separate commands alter table sales add partition jan_sales start 20230101 end 20230201  alter table sales_1_prt_jan_sales set access method ao_row alter table sales_1_prt_jan_sales set with compresstypezlib поменять место существующий раздел таблица команда  exchange partition  легасисинтаксис заменять существующий дочерний раздел обычный таблица новый синтаксис просто использовать  detach partition   attachpartition  добиваться внутри greenplum 7 выполняться  detach  затем  attachpartition  некоторый замена имя  1 using exchange partition alter table sales exchange jan_sales with table jan_sales_new         2 using attach partition alter table sales detach partition jan_sales alter table sales attach partition jan_sales_new удалять дочерний раздел рано довольно сложно удалять дочерний раздел удалять таблица устаревать greenplum команда  alter table  drop partition  который также удалять таблица сначала нужно создавать фиктивный таблица заменять раздел который хотеть удалять фиктивный таблица затем удалять заменять раздел помощь  alter table  detach partition  легко выполнять тот задача  lengthy operations to remove an unwanted child partition wo dropping it create table dummy like sales alter table sales exchange partition archived_sales with dummy alter table sales drop partition archived_sales drop table dummy   can just detach partition now alter table sales detach partition archived_sales alter table  drop partition  суть выполнять тот задача  drop table  почему  alter table  drop partition  еще существовать это связанный синтаксис поразному обрабатывать имя таблица разделять дочерний раздел split partition   специальный команда который выполнять интересный задача разделять конечный раздел создавать раздел это еще синтаксис простой альтернатива postgresql должный вручную отсоединять раздел добавлять раздел соответствующий разделять диапазон кейс легасисинтаксис альтернативный новый существующий синтаксис создавать дочерний раздел вместе родительский create table  partition  create table  partition by and create table  partition of создавать добавлять раздел alter table  add partition create table  partition of заменять существовать дочерний раздел обычный таблица alter table  exchange partition alter table  detach partitionand attach partition удалять раздел alter table  drop partition drop table разделять раздел alter table  split partition detach partition and ",
    "tags": [
        "субд",
        "postgresql",
        "postgres",
        "greenplum",
        "greenplum4",
        "партиционирование",
        "таблицы",
        "таблицы данных"
    ]
}
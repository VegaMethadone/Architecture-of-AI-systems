{
    "article_id": "726452",
    "article_name": "Pinia scoped store",
    "content": "проблема сегодняшний день стейтменеджер экосистема vue изначально vuex впоследствии pinia пример который рассматривать проблема предоставлять глобальный централизованный хранилище привязывать корень приложение это замечательно думать практически каждый читатель пользоваться бенефит данный подход быть доступ стор любой уровень вложенность переиспользование давать различный блок страница однако текущий система один важный ограничение  глобальный модуль pinia стор позволять создавать независимый состояние  инстанс  один компонентамодуль приводить несколько пример yclients сталкиваться проблема пытаться переиспользовать крупный сложный модуль оплата вкладка один модальный окно окно одновременно мочь сосуществовать несколько инстанс модуль состояние который храниться стор должный полностью независимый друг друг разрез концепция единый глобальный хранилище pinia похожий проблема сталкиваться  пользователь pinia github  существовать кейс один страница необходимо отображать несколько датагрид пример сравнение различный набор данные такой образ состояние дерево компонент каждый датагрид должный независимый друг друг также стоить отмечать frontendразработке единый правило работа стор хранить совершенно разный тип объем данный встречаться проект небольшой переиспользуемый компонентыблок иметь свой стора целое стор становиться все  один тренд последний время являться переход единый монолит работа множество маленький специализировать хранилище pinia effector яркий то пример весь это тенденция индустрия разнообразие подход работа стор делать проблема значительно актуальный решение сообщество комментарий дискуссия сообщество содействие один мейнтенер pinia предлагать несколько решение     однако объединять один главный особенность  использование кастомный идентификатор доступ стор решение выше этот tableid listviewid идентификатор сторонний компонент смочь получать доступ нужный модуль pinia следовательно необходимо реализовывать механизм хранение передача кастомный идентификатор подобный стор несколько весь использовать данный модуль компонент число компонентампотомок решать один проблема получать другой отдельный внимание заслуживать библиотека  piniadi  помощь решать вышеописанный проблема представлять подход значительно сложно подход pinia скоро команда потребоваться время изучение внедрение фактически автор предлагать новый синтаксис работа стор который многое идти вразрез главный преимущество принцип pinia простота доступность кажется необходимый решение который похоже оригинальный синтаксис вариант решение pinia стор привязывать скоуп  pinia scoped стор  данный случай скоуп область видимость являться инстанс компонент который первый иерархия использовать данный стор дочерний компонента данный инстанс получать доступ нужный стор автоматически  передача идентификатор скоупа происходить капот  разработчик нужно продумывать механизм менять стандартный подход работа стор использование модуль параллельный иерархия создаваться новый независимый стор доступ который потомок также получать автоматически итог каждый иерархия использоваться свой отдельный стор storemodulename3 storemodulename6 картинка высоко скоуп который являться инстанс инициализировать компонент удаваться добиваться счет два важный концепция создание стор вызов оригинальный definestore происходить момент непосредственный использование позволять привязываться скоупуинстанс компонент передача идентификатор компонент скоупа использоваться provideinject получение отправка идентификатор происходить капот внутри функция usestore переходить реализация основа взять  source код функция definestore  типизация практически полностью скопировать оригинал vue core team активно использовать as any поэтому становиться избегать комментарий добавлять пояснение каждый важный шаг import definestore pinia storedefinition storegeneric getactivepinia from pinia import inject getcurrentinstance onunmounted componentinternalinstance injectionkey from vue   id piniaid  id  это первый аргумент функция definescopeycstore пример recordacquiringpaymentredesign  piniaid  id стор pinia содержать идентификтор скоупа пример recordacquiringpaymentredesign123124123123123 123124123123123  идентификатор скоупать качество идентификатор скоупа использоваться uid первый компонент иерархия который использоваться стор   scopedstoresidsbyscope содержать информация какой скоупахscopeid какой именно сторыid piniaid создаваться  позволять данный скоупаscopeid получать id piniaid создавать данный скоупе стор использоваться предотвращение повторный создание стор одников скоуп type scopedstoresids  id in string string  recordacquiringpaymentredesign recordacquiringpaymentredesign123124123123123  const scopedstoresidsbyscope scopeid in string scopedstoresids    123123 recordacquiringpaymentredesign recordacquiringpaymentredesign123124123123123     содержать ссылка создавать ранее scoped стора ключ являться piniaid значение  стор const scopedstoresbypiniaid piniaid in string returntypetypeof definestore    export const definescopedstore typeof definestore  function  сигнатура функция скопировать сорс definestore httpsgithubcomvuejspiniablobv2packagespiniasrcstoretsl852   idoroptions any   setup any   setupoptions any  storedefinition    let id   let options    основа входящий параметр выделять id options скопировать сорс definestore   const issetupstore  typeof setup  function   if typeof idoroptions  string      id  idoroptions     options  issetupstore  setupoptions  setup    else      options  idoroptions     id  idoroptionsid       function usestorepinia pinia  null  undefined hot storegeneric storegeneric      const currentinstance  getcurrentinstance     if currentinstance  null        throw new errorscoped stores can not be used outside of vue component           const scopeid  currentinstanceuid  опасаться использовать uid компонент качество идентификатор скоупа  самостоятельно проставлять все компонент уникальный id помощь простенький плагинаhttpsgithubcomvuejsvueissues5886issuecomment308647738 опираться     let piniaid string  undefined  id нужный мы scoped стор pinia       проверять создаваться ранее нужный мы стор текущий компонент компонентахпредок пытаться получать piniaid scoped стор     if scopedstoresidsbyscopescopeidid        piniaid  scopedstoresidsbyscopescopeidid      else        piniaid  injectstringid            scoped стор созданудаваться получать piniaid  возвращать     if piniaid  scopedstoresbypiniaidpiniaid        return scopedstoresbypiniaidpiniaidpinia hot            выясняться scoped стор создавалсян удаваться получать piniaid  создавать      piniaid  id стор  идентификатор скоупа     piniaid  idscopeid       создавать стор сохранять ссылка scopedstoresbypiniaid     if issetupstore        scopedstoresbypiniaidpiniaid  definestorepiniaid setup options      else        scopedstoresbypiniaidpiniaid  definestorepiniaid options            сохранять piniaid id стор scopedstoresidsbyscopeid     scopedstoresidsbyscopescopeid  scopedstoresidsbyscopescopeid       scopedstoresidsbyscopescopeidid  piniaid       создание стор провайдим piniaid весь потомок смочь получать он доступ      совместимость options api mapфукнциями приходиться добавлять provide возможность задавать извне инстанс компонентапровайдер подробно ниже      важно работать composition api  заменять обычный provide     provideininstanceid piniaid currentinstance       удалять стор удаление скоупа скоупа  scoped стор     onunmounted         const pinia  getactivepinia        if pinia  piniaid return        delete piniastatevaluepiniaid  взять api документация pinia httpspiniavuejsorgapiinterfacespinia_storewithstatehtmlmethodsdispose       delete scopedstoresbypiniaidpiniaid       delete scopedstoresidsbyscopescopeid      currentinstance       возвращать создавать стор     return scopedstoresbypiniaidpiniaidpinia hot       usestoreid  stringdatenow  scoped стор id присваиваться поздно момент использование стор нужно лишь типизация    return usestore    vue core tea",
    "tags": [
        "vuex",
        "pinia",
        "vue.js",
        "flux",
        "state management"
    ]
}
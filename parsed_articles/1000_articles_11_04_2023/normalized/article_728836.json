{
    "article_id": "728836",
    "article_name": "Обход блокировок: настройка сервера XRay для Shadowsocks-2022 и VLESS с XTLS, Websockets и фейковым веб-сайтом",
    "content": "предыдущий статья серия  современный технология обход блокировка v2ray xray xtls hysteria всевсевс   программыклиент дляпротокол недетектируемый обход блокировка сайт v2rayxray clash singbox другой  спротокол разбираться склиент разбираться наконецто наставать время рассказывать отом какже настраивать свойличный проксисервер ссовременный протокол дляобход блокировка быть настраивать сервер набаз xray который являться форком известный v2ray немного упоминать singbox спротокол shadowsocks2022и vless странспорт xtlsvision фейков вебсайт длязащита отвыявление вкачество запасной вариант натомж сервер настраивать fallback наvlesswebsockets возможность работать cdn тип cloudflare ipадрес ваш сервер попадать блокировка конец приводить настройка десктопный мобильный клиент подключение ко весь это  поехать традиция нейрокартинка отвлечение внимание настройка быть описывать debian ubuntu linux vps стоять дистрибутив примерно самый хотя некоторый команда название пакет мочь отличаться  итак допускать vpsсервер debian ubuntu какойнибудь заморский юрисдикция ipадрес он настраивать ssh вообще пока неплохо должный какойнибудь домен обязательно платный хотя акция зарегистрировать домен какойнибудь очень популярный зона доллардва год подходить dyndns чегото вышеописанный советовать ознакомляться     статья начало описываться базовый установка настройка vpsсервера linux регистрация бесплатный домен dyndns идти далеко первый вариант настройка приводить пустой сервер  это ваш сервер никакой другой сервис добавлять вебсайт второй половина статья рассказывать настраивать xray машина крутиться вебсервер хотеть лишний трогать конфигурация третий вариант docker  самый маленький  вариант первый полный подробный разработчик xray подготовить скрипт который автоматически скачивать xray использовать система создавать systemdюнит спасибо  alegz81  напоминать  httpsgithubcomxtlsxrayinstall   устанавливаться один длинный команда  bash c curl l httpsgithubcomxtlsxrayinstallrawmaininstallreleasesh  install единственный различие описывать статья конфигурация конфига xray быть лежать optxray usrlocaletcxray либо мочь устанавливать ручка идти сюда  httpsgithubcomxtlsxraycorereleases  скачивать самый свежий билд xraycore  wget httpsgithubcomxtlsxraycorereleasesdownloadv180xraylinux64zip создавать директория распаковывать делать файл исполнять поставляться zipархиве поэтому разрешение упаковкераспаковка теряться  mkdir optxray  unzip xraylinux64zip d optxray  chmod x optxrayxray далее создавать systemdюнит вставлять туда следущий текст использовать nano понятный дело мочь использовать vi вообще угодный  nano usrlibsystemdsystemxrayservice unit descriptionxray  service typesimple restartonfailure restartsec30 workingdirectoryoptxray execstartoptxrayxray run c optxrayconfigjson  install wantedbymultiusertarget  systemctl daemonreload  systemctl enable xray обращать внимание  данный случай xray запуститься пользователь root это очень план безопасность сделать это пример упрощение мануал похорошему нужно создавать xray отдельный пользователь запускать забывать выставлять право чтение директория файл certbotletsencrypt  далеко возможность повесить сервер порт 443 другой 1000   выставлять специальный опция  бинарникпроцесс установка xray заканчивать дальнейший действие быть одинаковый ручной настройка использование скрипт мы быть нужный tlsсертификаты устанавливать certbot запрашивать сертификат наш домен например examplecom  apt install certbot  certbot certonly standalone preferredchallenges http d examplecom нужно иметь домен домен поддомен например доступный напрямую cdn указывать еще аргумент d команда сертификат сразу два домен еще оно поддерживать wildcards certbot спрашивать ваш емайл всякий случай спрашивать согласный правило запрашивать сертификат letsencrypt полагать папочка etcletsencrypt создавать правило обновляться каждый 3 месяц каждый обновление сертификат нужно перезапускать xrayсервер давать попросить certbot делать это автоматически  nano etcletsencryptrenewalexamplecomconf конец добавлять строка renew_hook  systemctl reload xray переходить самый интересный создавать редактировать конфиг  nano optxrayconfigjson  usrlocaletcxray случай использование скрипт    log      loglevel info      routing      rules      domainstrategy asis      inbounds             port 23       tag ss       protocol shadowsocks       settings          method 2022blake3aes128gcm         password aaaaaaaaaaaaaaaabbbbbbbbbbbbbbbb         network tcpudp                        port 443       protocol vless       tag vless_tls       settings          clients                         id 7957c33cd9ca11edafa10242ac120002             email user1myserver             flow xtlsrprxvision                             decryption none         fallbacks                         path myverysecretpath             dest vlessws                                   dest 8080                                  streamsettings          network tcp         security tls         tlssettings            alpn              http11             h2                      certificates                             certificatefile etcletsencryptliveexamplecomfullchainpem               keyfile etcletsencryptliveexamplecomprivkeypem                                               sniffing          enabled true         destoverride            http           tls                                 listen vlessws       protocol vless       tag vless_ws       settings          clients                         id 7957c33cd9ca11edafa10242ac120002             email user2myserver                             decryption none              streamsettings          network ws         security none         wssettings            path myverysecretpath                           outbounds             protocol freedom       tag direct                 protocol blackhole       tag block          обращать внимание inbounds задавать правило обработка входить подключение  первый идти shadowsocks2022 23 порт мочь использовать любой порт сам себя этот версия протокол именно 2022 говорить method 2022blake3aes128gcm ключ  любой шестнадцатеричный форма длина зависеть тип шифр пример 128битный шифр использовать 256битный ключ соответственно должный раз длинный далеко идти vless tls стандартный порт 443 секция clients задаваться пользователиклиент пример id клиент сгенерировать любой онлайновый uuidгенератором  также юзер задаваться опция flow значение xtlsrprxvision означать пользователь подключаться использование xtlsvision настройка streamsettings мочь увидеть путь сертификат который запрашивать letsencrypt путь должный файл соответствовать ваш домен fallbacks задаваться правило делать юзер опознавать либо подключение производиться чистый vlessпротокол видеть httpзапрос uri myverysecretpath передавать подключение обработчик vlessws остальное  порт 8080 висеть вебсервер фейков настоящий вебсайт тречать идти вариант vless websocket 443 порт такой образ например подключаться сервер напрямую cdn помогать ваш сервер заблокировать цензор подклюяаетесь строгий корпоративный прокси настройка аналогичный предыдущий пункт uuid пользователь указывать самый единственный различие  опция xtlsrprxvision cdn работать секция wssettings указывать секретный путь сервер myverysecretpath fallbacks комментарий предыдущий статья упоминать websocketтранспорт работать надежно эффективно очень большой объем передаваемый трафик cloudflare обидиться начинать просить переходить платный тариф поэтому вместо websocket некоторые советовать использовать grpcтранспорт пробовать получаться нормально настраивать fallback grpc  комментарий  статья хабраюзер  s7eepz  прикладывать пример настройка fallbackа grpc nginx  важный момент nginx должный собирать grpcмодулем debianubuntu официальный репозиторий разработчик собирать мочь замечать конфиг упоминать порт 8080 fallback он должный слушать вебсервер сайт маскировка самый просто вариант это сделать  поставлять позади nginx  apt install nginx  nano etcnginxsitesenableddefault",
    "tags": [
        "xray",
        "v2ray",
        "sing box",
        "shadowsocks",
        "vmess",
        "vless",
        "nginx",
        "websocket",
        "cdn"
    ]
}
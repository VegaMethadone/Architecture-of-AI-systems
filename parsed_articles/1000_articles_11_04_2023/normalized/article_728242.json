{
    "article_id": "728242",
    "article_name": "Добавление файлов контента в nuget-пакетах",
    "content": "привет звать александр старший разработчик команда который заниматься оцифровка документ разрабатывать пакет библиотека компонент возникать необходимость дополнять исполнять код определенный контент нередко контент нужный именно вид отдельный файл встроенный ресурс пример такой задача мочь различный пакет netоболочек который обычно необходимый исходный библиотека мы понадобиться специальный шрифт внутрикорпоративный библиотека конвертация документ видеть вариант решение проблема встраивать шрифт embeddedресурсы копировать инициализация библиотека целевой папка добавлять файл nugetпакет первый решение  это фактически хардкод пользователь библиотека захотеть использовать свой шрифт вместо наш равный быть добавлять папка приложение каждый запуск поэтому решать добавлять файл шрифт nugetпакет описывать решение подводной камень который наткнуться процесс работа хабер один  статья  тема хотеть подробно рассказывать свой решение обсуждать некоторый момент который разбирать материал первый попытка неудачный сначала решать устанавливать файл свойство build action  none copy to output directory  copy if never этот решение отлично работать прямой ссылка проект солюшень nugetпакетах шрифт оказываться доступный пакет который напрямую ссылаться пакет шрифт  например nugetпакет liba содержать шрифт liba использоваться nugetпакете libb добавление libb проект шрифт оставаться доступный libb использоваться nugetпакете libc добавление libc проект шрифт добавляться второй попытка удачный долгий изучение msdn stackoverflow приходить вывод сделать вручную написать nuspecфайл описание пакет propsфайл логика который должный выполняться сборка проект   добавлять проект папка buildtransitive складывать шрифт nuspec propsфайлы папка называть buildtransitive пакет папка такой имя нужный каждый последующий пакет цепочка ссылка иметь доступ шрифт узнавать  документация    добавлять ссылка props nuspec файл проект   project sdkmicrosoftnetsdk   propertygroup          nuspecfilebuildtransitivelibanuspecnuspecfile    propertygroup      import projectbuildtransitivelibaprops  project открывать nuspecфайл описывать какой файл полагать наш пакет    files     file srclibaprops targetbuildtransitive      file srcfonts targetbuildtransitivefonts      file srcbindebugnet60libadll targetlibnet60libadll     files случай копировать файл libaprops папка fonts папка пакет buildtransitive собирать файл проект  папка пакет libnet60libadll   внимание использовать обратный слеш путь иначе получать разный результат сборка windows linux подробно ситуация описывать     описывать логика копирование файл шрифт сборка propsфайле   project xmlnshttpschemasmicrosoftcomdevelopermsbuild2003   itemgroup     none includemsbuildthisfiledirectoryfonts        linkfontsrecursivedirfilenameextensionlink       packagecopytooutputdirectorypreservenewestpackagecopytooutputdirectory       copytopublishdirectorypreservenewestcopytopublishdirectory       copytooutputdirectorypreservenewestcopytooutputdirectory       visiblefalsevisible     none   itemgroup project скрипт содержимое папка fonts пакет сборка рекурсивно скопировать папка fonts выходной каталог дополнять функциональность   этап получаться собирать пакет шрифт использование который шрифт быть автоматически копироваться выходной каталог независимо длина цепочка ссылка наш пакет   многие ide позволять заполнять данные автор компания описание пакет далее идеал метаданные nugetпакете нужно получать файл проект дополнительный переменная передавать сборка билд мой случай это версия пакет   передавать данный файл проект nuspec использовать тег nuspecproperties результат файл проект выглядеть   project sdkmicrosoftnetsdk   propertygroup     targetframeworknet60targetframework     implicitusingsdisableimplicitusings     nullabledisablenullable     generatepackageonbuildtruegeneratepackageonbuild     versionpkgversionversion     authorsauthors listauthors     descriptionproject descriptiondescription     nuspecfilebuildtransitivelibanuspecnuspecfile     nuspecpropertiesnuspecpropertiespackageidmsbuildprojectnamenuspecproperties     nuspecpropertiesnuspecpropertiespackageauthorsauthorsnuspecproperties     nuspecpropertiesnuspecpropertiespackagedescriptiondescriptionnuspecproperties   propertygroup   target namenuspecproperties aftertargetsbuild     propertygroup       nuspecpropertiesnuspecpropertiespackageversionversionnuspecproperties       nuspecpropertiesnuspecpropertiespackagetargetpathtargetpathnuspecproperties     propertygroup   target   import projectbuildtransitivelibaprops  project номер версия передавать сборка переменная pkgversion записывать тег version переменный nuspec передаваться переменный nuspecproperties пара ключ  значение разделяться точка запятая данные версия конечный путь выходной файл сборка записываться билд   передавать версия переменный pkgversion запускать сборка проект номер 100   сборка проект билдмашина запускаться помощь команда    dotnet build  solution_file_path c release norestore ppkgversionpackage_version output outdir случай файл проект тег generatepackageonbuild устанавливать true выполнять сборка проект создавать nugetпакет тег generatepackageonbuild устанавливать false разделять операция dotnet build dotnet pack данные файл проект попадать nuspecфайл   пример nuspecфайла добавлять переменный объявлять файл проект   package xmlnshttpschemasmicrosoftcompackaging201305nuspecxsd   metadata     idpackageidid     versionpackageversionversion     authorspackageauthorsauthors     descriptionpackagedescriptiondescription     dependencies       group targetframeworknet60      dependencies   metadata   files     file srclibaprops targetbuildtransitive      file srcfonts targetbuildtransitivefonts      file srcpackagetargetpath targetlibnet60libadll    files package надеяться статья помогать комуто сэкономить время нерв тестовый проект посмотреть  github дополнительный информация   мой тестовый проект который содержать шрифт ссылка другой пакет добавлять ссылка nugetпакет записывать файл проект приходиться вручную прописывать nuspec избегать ручной поддержка целостность ссылка рабочий проект вынести шрифт отдельный сборка который кроме шрифт создавать отдельный пакет ссылаться другой проект   сборка нужно посмотреть значение переменный файл проект это сделать помощь тег message   project sdkmicrosoftnetsdk      target namelog aftertargetsbuild     message importancehigh textbuild variables      message importancehigh textmsbuildprojectname  msbuildprojectname      message importancehigh texttargetpath  targetpath      message importancehigh textnuspecproperties  nuspecproperties      message importancehigh textbuild variables    target    project оставаться вопрос хотеть поделиться опыт работа nugetпакетами добро пожаловать комментарий",
    "tags": [
        "nuget",
        "nuget package",
        ".net",
        "msbuild",
        "ооп"
    ]
}
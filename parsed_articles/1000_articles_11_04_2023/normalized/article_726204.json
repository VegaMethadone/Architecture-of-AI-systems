{
    "article_id": "726204",
    "article_name": "Поддержка пакетов в стиле Oracle в СУБД Postgres Pro 15 Enterprise",
    "content": "новый версия свой флагманский дистрибутив postgres pro 15 enterpise компания postgres pro добавлять поддержка функциональность пакет расширять синтаксис plpgsql добавлять новый механизм среда выполнение хранить процедура  данный статья описывать поддержка функциональность пакет postgres pro 15 enterpise  группировка тип переменный процедура функция впакет   поддержка секция инициализация пакет   поддержка глобальный переменный пакет доступный втечение весь жизнь сессия также статья быть рассматривать особенность использование пакет субд postgres pro enterprise введение самый трудоемкий этап проект миграция субд oracle postgresql являться миграция хранить код oracle plsql plpgsql это связанный отсутствие поддержка пакет packages plpgsql данный обстоятельство приводить необходимость переписывание код  простой конвертация синтаксический конструкция обходиться решение вышеописанный проблема упрощение миграция oracle субд postgres pro 15 enterprise добавлять поддержка функциональность пакет packages стиль oracle необходимо отмечать пакет postgres pro 15 enterprise обеспечивать полный поддержка синтаксис oracle plsql ручной доработка код миграция равный потребоваться менее поддержка функциональность пакет позволять раз уменьшать затрата изменение код миграция технический точка зрение поддержка пакет postgresql представлять себя расширение синтаксис язык plpgsql небольшой дополнение ядро субд благодаря который реализовываться функциональный аналог  пакетовoracle вводиться ряд дополнительный команда работа они такой пакет субд oracle прежде переходить описание функциональность пакет субд postgres pro 15 enterprise кратко напоминать такой пакет субд oracle пакет oracle plsql  это объект схема который группировать логически связанный тип курсор константа исключение глобальный переменный подпрограмма процедура функция единый целое    пакет состоять два часть спецификация пакет тело пакет хотя общий случай тело пакет отсутствовать    спецификация пакет объявляться тип переменный константа исключение курсор подпрограмма доступный использование приложение  тело пакет включать реализация подпрограмма пакет объявление внутренний переменная также секция инициализация переменный тип также подпрограмма объявлять тело пакет недоступный использование вне пакет рис 1 пакет субд oracle database ниже приводить пример спецификация plsqlпакета counter субд oracle содержать глобальный переменный n функция inc  createor replace package   counteris  nint  functionincreturnint  end  тело пакет counter субд oracle присутствовать объявление приватный глобальный переменный k доступный тело пакет реализация функция inc  createor replace package body counteris  kint 3 переменный доступный тело пакет  functionincreturnintis  begin    n  n  1    returnk  n  end    begin  секция инициализация пакет  n  1  foriin110 loop    n  n  n  endloop  end глобальный переменный пакет существовать течение время жизнь сессия также обращать внимание тело пакет определять секция инициализация  блок код который выполняться сессия первый обращение любой элемент пакет обращение любой элемент пакет субд oracle указываться имя название элемент пакет разделитель точка  setserveroutputon  begin  dbms_outputput_linecountern  dbms_outputput_linecounterinc  end    1024  1028 поддержка функциональность пакет postgres pro 15 enterprise   реализация   функциональность пакет субд oracle добавлять новый команда также дополнительный директива прагма интерпретатор plpgsql следовать отмечать это именно реализация  основной  функциональность пакет полный копирование синтаксис логика субд oracle главное назначение новый возможность  упрощение миграция код oracle plsql переход plpgsql postgres pro текущий подходк поддержка функциональность пакетовподразумевать небольшой изменение язык plpgsql основывать использование схема schema postgresql качество функциональный аналог пакетоввводить дополнительный соглашение функция инициализация допустимый содержимое схема выполнение который схема рассматриваться пакет также добавлять дополнительный команда работа пакет который соответствующий образ работать такой особый схема  важно отмечать пакет оставаться полноценный схема функция работа обычный схема продолжать работать привычный образ соглашение пакет postgres pro enterprise определение пакет пакет считаться схема содержать функция инициализация содержать кроме функция процедура композитный тип функция инициализация пакет  initфункцией называться содержаться соответствующий схема функция язык plpgsql имя  __init__  иметь параметр возвращать тип void глобальный переменный пакет являться переменный объявлять функция инициализация такой образ переменный определенный блок declare функция инициализация пакет считаться пакетный доступный обращение другой функция пакет имя извне  импортирование см раздел новый синтаксический элемент  квалифицированный имя указание имя пакет точка например переменный bar  определенный declareблоке initфункции пакет foo  доступный извне пакет foobar  рис 2 пакет субд postgres pro enterprise 15 отдельно стоить обращать внимание пакетный переменная доступный код язык plpgsql хранить процедура разрабатывать другой язык например plperl plv8  недоступный получение значение глобальный переменный пакет sqlзапроса оператор select dmlоператора insert update delete пакет необходимо добавлять функция который должный возвращать значение глобальный переменная подобный поведение аналогично субд oracle  точно также глобальный переменная пакет недоступный sqlзапросах например sql select countern from dual  select countern from dual     error at line 1  ora06553 pls221 n is not a procedure or is undefined пакетный переменная мочь константа  синтаксис определение поведение такой константа стандартный plpgsql функция инициализация пакет вызываться автоматически первый текущий сессия обращение какойлибо функция процедура иметь статус пакетный см раздел новый синтаксический элемент любой глобальный переменная пакет выполнение любой блок код анонимный процедура функция импортировать данный пакет ручной вызов функция инициализация требоваться желание выполнять приводить сброс значение пакетный переменная также предусматривать специальный функция plpgsql_reset_packages сброс глобальный переменный пакет текущий сессия  аналог процедура dbms_sessionreset_packages субд oracle вышеописанный пример пакет counter субд oracle портирование субд postgres pro enterprise примета следующий вид синтаксис оператор создание пакет аналогичный субд oracle create or replace package counter       create function __init__ returns void as   секция инициализация пакет     declare         n int  1         k int  3  переменный становиться публичный       begin         for i in 110 loop             n  n  n         end loop     end            create function inc returns int as      begin         n  n  1         return kn     end       использование пакет субд postgres pro enterprise выглядеть следующий образ do  import counter begin     raise notice  countern     raise notice  counterinc end    notice  1024 notice  1028 отдельно отмечать нюанс использование пакет пакет      содержаться схема тк являться схема пакет      иметь одинаковый имя какойлибо схема пакет      содержать тип глобальный переменный константа      курсор процедура функция поддерживаться создание      таблица представление последовательность пакетесхема этот ограничение точный также субд oracle  невозможно пакет plsql вставлять операто создание таблица create table представление create view последовательность create sequence тд элемент      пакет являться публичный элемент пакет доступный любой      импортировать пакет блок код спецификация тело пакет отдельно определяться      функция пакет импортировать блок код должный написать      язык plpgsql обращение      ко весь член пакет снаружи должно происходить квалифицировать      имя указание имя пакет обращение пакетный переменный      функция пакет производить напрямую      неквалифицированный имя инициализация      глобальный переме",
    "tags": [
        "pl/pgsql",
        "миграция с oracle",
        "пакеты"
    ]
}
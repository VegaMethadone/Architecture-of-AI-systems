{
    "article_id": "726408",
    "article_name": "Фотки по-красоте: как сделать сетку предпросмотра изображений",
    "content": "все привет звать марат исаев фронтендразработчик вконтакте разрабатывать решение vk мессенджер пост хотеть рассказывать сделать сетка предпросмотр фотография вариант доступный фастчат вконтакте близкий время появляться vk мессенджер вебверсия практика все просто показываться первый взгляд  изображение бывать разный ориентация разный соотношение сторона хотеться сделать акцент какихто изображение набор показывать другой  популярный подход пожалуй часто сетка предпросмотр делать описывать несколько алгоритм который быть применять альбом зависимость количество фотография соотношение сторона еще какихто специфичный проект параметр например  альбом фотография большинство портретный ориентация применять strategy3portrait фотография 5 10 применять strategy5_10  важно сохранять порядок следование фотография давать подругому предлагать рассматривать способ решение задача сначала отказываться привязка конкретный количество фотография пространственный ориентация сформулировать задача  размещать n фотография сторона x n y n  прямоугольник сторона ab сохранять очередность  затем выравнивать фотография высота h начинать выкладывать кирпич фотография помещаться текущий ряд перенести ее новый продолжать выкладывать заканчивать кладка изменять масштаб каждый ряд такой образ заполнять пробел проверять кладка один картинка оказываться слишком маленький минимальный размер h min  w min  близкий соотношение сторона прямоугольник ab проверка критический размер проходить получаться сетка считать подходящий очевидно удачный выбирать h диапазон h min  b быстро получать желаемый результат пример подбирать h бинарный поиск поступать еще просто сделать несколько кладка шаг дельта h min  b затем выбирать вариант который соотношение сторона близко ab сложность алгоритм узкий место алгоритм  самый поиск оптимальный h быть идти шаг дельта сложность линейный количество шаг  константа быть искать бинарный поиск сложность линейный константа диапазон b  h min  следовательно log 2 b  h min  мир идеальный мир реальный размещать n фотография сторона x n y n  прямоугольник размер a b сохранять очередность размещать n фотография сторона x n y n  прямоугольник размер a b сохранять очередность  выдерживать критический размер оригинальный соотношение сторона  это зависеть n соотношение сторона фотография a b вконтакте количество изображение предпросмотр ограничивать 10 фотография один сетка нужный значит мы нужно както гарантировать хороший результат 210 изображение иметь дело комбинаторика нужно просчитывать возможный вариант проанализировать результат причем решение задача мы нужно воспользоваться  размещение повторение  a n k   n k   наш случай n  это количество возможный соотношение сторона отдельный фотография k  общий количество фотография 2 10 отсюда вывод количество размещение конечный мы важный количество возможный соотношение сторона конечный например выбирать пять соотношение 916 34 11 43 169 количество размещение рассчитываться 5 k   k  2  10 альбом пять фотография пять возможный соотношение количество возможный вариант размещение равно 3125 описывать стратегия частный случай смысл слишком ограничиваться лишь квадрат легко мочь описывать десять стратегия напоминать количество размещение такой случай 1 k  k  1  10 хотеть сделать сетка предпросмотр возможность разнообразный поэтому давать подумать еще улучшать алгоритм объять необъятный просматривать оценивать сетка обозначать диапазон соотношение сторона мочь отказываться проверка критический размер h min  w min  каждый отдельный фотография становиться взаимосвязанный мы достаточно знать лишь выбирать h  h min  h  b скрипт набор пул возможный размещение мочь взять   прогнать пул наш алгоритм проанализировать разброс отклонение соотношение сторона получаться сетка эталонный ab отклонение небольшой фиксировать h min  a b значение соотношение сторона фотография отклонение большой корректировать возможно стоить сокращать количество соотношение изменять размер a b зачастую общий картина портить последний изображение который оставаться один последний ряд такой случай принудительно объединять последний ряд допускать мы нужно скомпоновать фотография сетка соотношение сторона 43 принимать ширина окно 360 пиксел указывать минимальный высота каждый отдельный фотография должный менее 80 пиксел быть приводить диаграмма понимание общий картина мы достаточно посмотреть распределение получаться сетка диапазон соотношение сторона 2 5 10 фотография разброс пропорция сетка 2 фотография разброс пропорция сетка 5 фотография разброс пропорция сетка 10 фотография фотография пространство маневр например ряд два последний ряд содержать единственный изображение что говорить выше мочь применять принудительный объединение последний ряд  разброс пропорция сетка 2 фотография разброс пропорция сетка 5 фотография разброс пропорция сетка 10 фотография видеть вариант мы доступный сетка поддаваться постобработка например отсекать слишком высокий сетка отдавать предпочтение широко наоборот формировать сетка экран смартфон такой эвристика придумывать фотография значительно 10 любой другой число который нужно гарантировать результат выбор хороший соотношение просто опускать равный подбор h указывать равный h min  прийти гарантированный результат любой количество фотография время on ps свой рецепт сетка предпросмотр делиться комментарий",
    "tags": [
        "фронтенд",
        "превью фотографий"
    ]
}
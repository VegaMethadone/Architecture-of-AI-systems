{
    "article_id": "726880",
    "article_name": "История о том, как мы на Module Federation съезжали. Часть 2",
    "content": "привет вы снова максим второй часть придумывать решать пилиться сбой  который рассказывать первый часть  начинать личной кабинет  попилить микрофронтенд легко  разделять весь код модуль замыкать бизнеслогика конкретный модуль вынести общий часть общий библиотека оставаться доставать пила отпиливать модуль  делать отдельный приложение настраивать module federation поставлять цель вынести страница лк отдельный изолированный приложение главный страница операция магазин многое другой решать вынести отдельно термин module federation такой приложение  host   агрегатор собирать часть наш пазл целостный приложение выполнять роль хранилище общий данный приложение данный пользователь текущий цветовой схема язык remote   микрофронт который выполнять определенный задача наш лк например позволять работать транзакция тип приложение работать два режим hostприложением встраиваться standalone  хотеть запускать часть изолированно сам должный получать пользователь данные хедер  часть hostприложения футер блок  место встраиваться remote личный кабинет оченьочень ложиться история исход монолит микросервис задевать фронт бэкразработчик часто использовать микросервисный подход построение архитектура свой решение известно микросервис сложно это управлять взаимодействовать они фронт понимать 2023 год js работать браузер начинать внедрять  bffподход  держать сотня интеграция фронт сделать единый api работа фронт сторона bff выбирать сервис какой данные мы пойти это упрощать разработка особенно дальний сервис разный входной выходной api фронт прийти формат который удобно мы причина выбор module federation описывать рассказывать микрофронт помощь webpack микрофронтенд микросервис помощь webpack привет звать максим фронтендразработчик компания тинькофф лида команда фронтенд который habrcom выбирать module federation это один хороший коробочный решение рынок плюс использовать angular который 12й версия полностью поддерживать история react 17 vue 3 настройка module federation самый начало выглядеть plugins       new modulefederationplugin            remotes                  main mainhttplocalhost4201remoteentryjs                 operations operationshttplocalhost4202remoteentryjs                 stores storeshttplocalhost4203remoteentryjs                          shared share                 angularcore singleton true strictversion true requiredversion auto                 angularcommon singleton true strictversion true requiredversion auto                 angularcommonhttp singleton true strictversion true requiredversion auto                 angularrouter singleton true strictversion true requiredversion auto                 angularforms singleton true strictversion true requiredversion auto                 sharedmappingsgetdescriptors                             sharedmappingsgetplugin  блок отвечать ремоут remotes      main mainhttplocalhost4201remoteentryjs     operations operationshttplocalhost4202remoteentryjs     stores storeshttplocalhost4203remoteentryjs  блок зависимость немой говорить какой зависимость должный синглтон пошаривать фронтэнд приложение получать инстанс наш зависимость  думать тот видеть документация webpack module federation встречать похожий конфиг shared share     angularcore singleton true strictversion true requiredversion auto     angularcommon singleton true strictversion true requiredversion auto     angularcommonhttp singleton true strictversion true requiredversion auto     angularrouter singleton true strictversion true requiredversion auto     angularforms singleton true strictversion true requiredversion auto     sharedmappingsgetdescriptors  такой конфигурация порождать множество вопрос сначала скажем плюс плюс минус module federation сначала перечислять плюс mfe работать коробка  нужный дополнительный настройка проследовать документация подымать приложение  работать считать микрофронтендер молодец удобный управление зависимость  известно какой зависимость должный шариться сервис какой должный какой быть иметь свой инстанс какой быть видеть сразу конфиг видно сразу приложение  первый дело вынести определение зависимость отдельный файлик шарить все иначе запутываться ктото указывать зависимость ремоут хост минус mfe динамический управление  динамический управление envпеременные докерпеременный nginx каждый случай переменный устанавливать этап сборка билд мы интересно подставление переменный этап деплоить быть знать какой окружение разворачиваться наш код смочь собирать конфиг этап деплоить держать n количество значение envпеременных любой окружение влиять сорскод менять значение конфиг который код подгружать фолбэк  module federation работать помощь httpзагрузки идти загружать чанк зависимый приложение оно загружаться  webpack fall back загрузка наш ремоут просто выкидывать exception показывать белый страница док написать это управлять ремоут ремоут   внутрь hostприложения встраивать remoteприложение который являться дочерний хост  это наш микрофронт внутрь remoteприложения встраивать один remoteприложение получаться матрешка микрофронтенд внутри микрофронт показываться кейс выдумывать самый дело это реальный бизнесовый продовый кейс который успешно реализовывать  управление динамика вопрос динамика первый приходить голова  нужный конфиг который управлять динамически это значить создавать конфиг который заполняться динамически основа данные разворачиваться приложение приложение считывать создавать конфиг брать тот настройка который нужно применять загружать конфигурация приложение видеть дочерний микрофронт собирать карта роутинг выход получать схема хост приложение идти конфиг передавать конфигурация angular роутер reactроутеру работать  конфигурация  это простой массив объект       remoteentry httplocalhost4201remoteentryjs   remotename main   exposedmodule module   displayname navigationmain   routepath main   ngmodulename remoteentrymodule         remoteentry httplocalhost4202remoteentryjs   remotename stores   exposedmodule module   displayname navigationstores   routepath stores   ngmodulename remoteentrymodule     поле перекликаться webpack который описывать module federation несколько enum интерфейс который позволять типизировать объект брать параметр делать свой тип добавлять туда переменный который мы нужный расширять мы нужно описывать конфиг  import loadremotemoduleoptions from angulararchitectsmodulefederation  export type microfrontend  loadremotemoduleoptions     remotename string   displayname string   routepath string   ngmodulename string   код загрузчик export class microfrontendloaderservice    constructor     private readonly router router     private readonly httpclient httpclient     private readonly destroy tuidestroyservice        builddynamicroutes observableboolean      return thisresolveconfigpipe       takeuntilthisdestroy       tapcfg        thisrouterresetconfig         buildapplicationroutescfg                     maptotrue              private resolveconfig observablemicrofrontend       return thishttpclientgetmicrofrontendassetsconfigmfconfigjson      первый делать загрузчик  идти конфиг конфиг лежать локально рядом приложение этап деплоить приложение считывать дальнейший план  отдельно управлять конфигурация уносить s3 кэшировать приложение старт вычитывать конфиг передавать специальный функция выход получаться массив роут который нужно преобразовывать построить дерево конфиг загружать angular вешать загрузка хук app initializer providers         provide app_initializer     usefactory microfrontendservice microfrontendservice    microfrontendservicebuilddynamicroutes     deps microfrontendservice     multi true     функция который перетряхивать называть router shaker выглядеть немного громоздкий итог возвращать массив объект который выглядеть точно дефолтный конфиг роутинг import loadremotemodule from angulararchitectsmodulefederation  export function buildapplicationroutesoptions microfrontend routes    const mfroutes routes  arrayfromoptionsmapo       path oroutepath     loadchildren   loadremotemoduleoth",
    "tags": [
        "микрофронтенды",
        "module federation"
    ]
}
{
    "article_id": "726594",
    "article_name": "Как перевезти вашу инфраструктуру в K8S в SberCloud, и почему не надо летать в облаках?",
    "content": "прежде начинать приглашать подписываться наш tgканал youtube  рад новый друг   глава 1 китайский достижение наш день весь современный бизнес иметь взлет падение  говорить команда разрабатывать свой продукт мочь становиться либо свидетель рождение история либо ее участник именно 1987 год бывший офицер шэньчжэнь создавать компания капитал 20 000 юань ее название знать каждый инженер многие задумываться смысловой содержание название hua  китай wei  достижение стоп  мысленно подумать каждый  читать это хотеть узнавать чтото  sbercloud    обстоять дело  k8s  говорить  sbercloud  говорить  huawei cloud  свой суть это продукт который предоставляться мы рынок хотеться впадать полемика говорить почему никак иначе обсуждать ряд вопрос который действительно интересовать любой инженер решать связывать проектный деятельность  sbercloud  мы sbercloud мочь работать какой потенциальный трудность мочь обретать получать конечный счет глава 2 бесконечность предел быстрый рост продукт желанный аудитория пользователь актуальность потребность  именно тезис вынуждать каждый проект увеличивать темп разработка придумывать новый фич оптимизировать свой продукт плав размышлять логика иметься  prod   stage контур счастие этот ошибочный мнение быть проект помимо один  prod контур нужно иметь еще 510  stage окружение который быть повторять инфраструктура сетевой взаимодействие основный контур каждый разработчик должный спокойно пушить свой релиз аффектить свой работа другой сотрудник должный уверенность деплоить  preprod  изменяться подымать каждый контур свой сервер разграничивать среда разработка приступать настройка сетевой взаимодействие просто наш количество текущий сервер лишь 80 штука включать  stage стенд разработчик prod база данные файловый хранилище внутренний инструмент взаимодействие составление документация точка невозврат обслуживать весь это соответствовать весь требование безопасность каждый уважать инженер думать процесс оптимизация защита свой работа давать пропасть потратить время бессонный ночь выпивать чашка кофе ответ простой вопрос мы нужно кастомизировать наш код мы нужно облако быть  managed решение призывать упрощать обслуживание необходимый компонент инфраструктура мы нужный процесс автоматизация мы нужный  iac  долго думать  долго согласовывать  наш глаз падать недорогой ресурс облачный провайдер  sbercloud  полдела сделать работа еще бесконечно глава 3 нужно работать 12 час голова этап первый   разговаривать разработка  необходимо менять текущий подход разработка приложение отказываться явный костыль создавать обработка переменный окружение конфигурация последующий переопределение этап деплоить проектировать микросервис работа процесс единый порт последующий возможность распараллеливание задача добавлять корректный логирование лишний информация вносить комментарий код писать документация приложение идеальный микросервис  это который деплоиться быстро который деплоиться любой инфраструктура этап второй   значит  ранее осознавать наш проблема самый важный этап наш задача являться создание 80  vps  среда который поддерживать автоматизация развертывание масштабирование управление контейнеризированный приложение получаться мы необходимый  kubernetes случай  sbercloud  предлагать мы  cloud container engine cce  знать везде плюс минус  поговорить прямо ранее упоминаться рамка данный статья применение подход  infrastructure as code  iac  этот цель планироваться использовать  terraform  значит мы необходимый провайдер  sbercloud  иметься открытый доступ немой описывать большой часть ресурс обнаруживать сразу явный минус  отсутствие актуализация версия провайдер последний релиз 5 месяц назад момент написание данный статья сравнивать провайдер который иметься ранее упоминать  huawei  нетрудно замечать значительный часть приятный функционал дальнейший развертывание обслуживание инфраструктура также отходить далеко  касса  провайдер нужно сказать главный минус  cce  помимо предлагать 3х версия  kubernetes  стоить замечать присутствовать функционал выбор развертывание мастер захотеть выбирать 3 мастер это правильный речь идти отказоустойчивость создание быть проблема весь количество выделять сервер данный процесс различный  az  ограничивать лимит исчерпывать другой пользователь  sbercloud  минус присущий любой облако сказать останавливать путь  цель  поэтому сжинать зуб поставлять задача приступать написание  terraform модуль оставаться принципиальный вопрос общий вид инфраструктура этот требование обращаться документация выбирать стандартный концепция использование  elastic load balance  elb  advanced  тариф ряд неудача успех выбор необходимый конфигурация  ecs нод развертывать наш первый  cce кластер создавать  node pool  это лишь начинать этап третий   готовить инфраструктура речь идти сетевой взаимодействие иметься ряд необходимый задача вариант решение настройка сетевой взаимодействие текущий инфраструктура проект пример корректный резолвинг внутренний домен  fqdn  который принадлежать наш будущий кластер  k8s  исходный вкладывать функционал  cce sbercloud  иметь отличный функция предустановка  helm chart coredns  наш случай дефолтный конфигурация данный устраивать принимать решение производить корректировка чарт посредством  terraform  предлагать документация  sbercloud  работа ресурс  addon   addon template  data sbercloud_cce_addon_template coredns     cluster_id  varcluster_id   name        coredns   version     1231   resource sbercloud_cce_addon addon     cluster_id     varcluster_id   template_name  coredns   version        1231   values      basic_json   jsonencodejsondecodedatasbercloud_cce_addon_templatecorednsspecbasic     custom_json  jsonencodemerge       jsondecodedatasbercloud_cce_addon_templatecorednsspecparameterscustom                stub_domains  siteexamplecom 1010101053               flavor_json  jsonencodejsondecodedatasbercloud_cce_addon_templatecorednsspecparametersflavor2     конечный результат располагать configmap  coredns     5353          bind pod_ip         cache 30         errors         health pod_ip8080         kubernetes clusterlocal inaddrarpa ip6arpa              pods insecure             fallthrough inaddrarpa ip6arpa                  loadbalance round_robin         prometheus pod_ip9153         forward  etcresolvconf              policy random                  reload           siteexamplecom5353          bind pod_ip         errors         cache 30         forward  1010101053      отлично решение проблема находить документация присутствовать еще целевой ряд проблема ограничение трафик нод также ограничение трафик  elb  который планироваться входной точка трафик пользователь простой решение правка конфигурация ресурс обходиться сложно  cce  являться наш  managed  решение идеологический вариант ручной вмешательство  security groups  сервер  node pool  мы подходить вследствие пойти масштабный решать ограничивать трафик подсеть наш нод помощь применение  network acls   механизм закрывать вопрос доступ трафик сервер оставаться задача  elb этап поднятие  provider sbercloud  предоставлять мы возможность автоматизированный создание балансировщик установка  helm chart ingressnginx   annotations  apiversion v1 kind service metadata    annotations       kubernetesioelbclass union       kubernetesiosessionaffinitymode source_ip       kubernetesioelbsubnetid 5083f2259bf848fa9c8b67bd9693c4c0       kubernetesioelbautocreate typepublicbandwidth_name    ccebandwidth 1551163379627    bandwidth_chargemodebandwidthbandwidth_size5    bandwidth_sharetypeper    eip_type5_bgpnamejames    labels       app nginx       name nginx  spec    externaltrafficpolicy local    ports     name service0      port 80      protocol tcp      targetport 80    selector      app nginx type loadbalancer  зависимость описывать мы ранее порт протокол подниматься дополнительный компонент балансировщик listener  порт вход трафик backend server groups  конечный точка проксирование умолчание отсутствовать немаловажный аспект  whitelist   это список ip который разрешать д",
    "tags": [
        "sbercloud",
        "sbercloud.advanced",
        "kubernetes",
        "devops",
        "time to market",
        "terraform",
        "huawei",
        "iac",
        "k8s",
        "network security"
    ]
}
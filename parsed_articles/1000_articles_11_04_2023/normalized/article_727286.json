{
    "article_id": "727286",
    "article_name": "Oracle Real Application Clusters в среде Bare Metal Kubernetes Cluster",
    "content": "приветствовать данный статья рассматривать необходимый достаточный действие запуск настройка rac 213 кластер kubernetes 126 прецедент апрель 2023 г работа вне oracle cloud находить поэтому приходиться проводить тысяча эксперимент отбрасывать принимать множество гипотеза сегодня первый мир выкатка rac kubernetes docker uname a linux r02 541721363007el8uekx86_64 2 smp fri oct 8 162301 pdt 2021 x86_64 x86_64 x86_64 gnulinux oel 85 сертифицировать oracle rac 79 устанавливать containerd version containerd githubcomcontainerdcontainerd v164 212e8b6fa2f44b9c21b2798135fc6fb7c53efc16 runc version runc version 102 spec 102dev go go1167 libseccomp 251 основной задача настройка выкатка rac создание настройка подсеть кластер kubernetes настройка параметр  ядро рабочий узел kubernetes  ядро контейнер rac namespaced read only выбор настройка конфигурация использовать rac оперативный память настройка общий хранилище rac kubernetes данный выкатка являться единственно возможный конфигурация это самый простой пример работать решение развертывание окружение разработка тестирование достигать относительно простой путем настройка production следовать использовать другой подход настройка резервирование общий раздел statefulsetyaml                                                                                     author serguei nastassi          itoracleicloudcom                          created 01032023                                                                       apiversion appsv1 kind statefulset metadata   name oraclerac213 spec   servicename rdbms   podmanagementpolicy parallel   updatestrategy     type rollingupdate   replicas 1   selector     matchlabels       app oraclerac213   template     metadata       labels         app oraclerac213       annotations           k8sv1cnicncfionetworks                              name macvlanconf               ips 17216115024                                         name macvlanprivconf               ips 1921681715024                             spec       terminationgraceperiodseconds 300       securitycontext         sysctls                name kernelshmall                 value 2097152                name kernelsem                 value 250 32000 100 128                name kernelshmmax                 value 8589934592                name kernelshmmni                 value 4096       containers          name rdbms           image crlocal32424containerregistryoraclecomdatabaserac21300           resources             requests               memory 16gi             limits               memory 16gi           securitycontext             privileged true             capabilities               add sys_nicesys_resourcenet_adminaudit_controlaudit_writesyslogsys_timesys_resourcesys_rawiosys_modulesys_chrootsys_bootsys_adminsetuidsetgidnet_bind_servicechown             runasuser 0             procmount unmasked             allowprivilegeescalation true           envfrom              configmapref                 name oraclerdbmsconfig           ports              containerport 1521               name oraclelistener              containerport 5500               name oemexpress           volumedevices              name orablk0               devicepath devasm_disk01              name orablk1               devicepath devasm_disk02              name orablk2               devicepath devasm_disk03              name orablk3               devicepath devasm_disk04              name orablk4               devicepath devasm_disk05           volumemounts            name oradata             mountpath oradata            name tmpfs             mountpath devshm            name hp             mountpath devhugepages            name cgroups             mountpath sysfscgroup             readonly true            name proc             mountpath hostproc            name boot             mountpath boot             readonly true       volumes          name oradata           nfs             server 19216814             path homeoraclerac213          name orablk0           persistentvolumeclaim             claimname nas0oraclerac2130          name orablk1           persistentvolumeclaim             claimname nas1oraclerac2130          name orablk2           persistentvolumeclaim             claimname nas2oraclerac2130          name orablk3           persistentvolumeclaim             claimname nas3oraclerac2130          name orablk4           persistentvolumeclaim             claimname nas4oraclerac2130          name tmpfs           emptydir             medium memory             sizelimit 4gi          name hp           hostpath             path devhugepages          name cgroups           hostpath             path sysfscgroup             type directory          name proc           hostpath             path homehostproc             type directory          name boot           hostpath             path boot             type directory   volumeclaimtemplates    metadata       name nas0     spec       accessmodes          readwritemany       volumemode block       resources         requests           storage 23gi    metadata       name nas1     spec       accessmodes          readwritemany       volumemode block       resources         requests           storage 23gi    metadata       name nas2     spec       accessmodes          readwritemany       volumemode block       resources         requests           storage 23gi    metadata       name nas3     spec       accessmodes          readwritemany       volumemode block       resources         requests           storage 23gi    metadata       name nas4     spec       accessmodes          readwritemany       volumemode block       resources         requests           storage 23gi сначала создавать пространство имя  apiversion v1 kind namespace metadata   name oraclerac213   labels     kubernetesiometadataname oraclerac213     podsecuritykubernetesioenforce privileged spec   finalizers    kubernetes всвязь отмена podsecuritypolicy версия 123 часть настройка осуществляться пространство имя создание сеть адаптер приватный частный сеть rac исторически требоваться 2 адаптер виртуальный подходить меньший количество адаптер работать мой мнение любой cni настраивать добавление дополнительный адаптер контейнер запуск сокращение время внедрение использовать готовый решение multus одобрять cncf развертывание multus cni кластер kubernetes советовать обращать внимание возможность развертывание узел быть работать контейнер rac отсутствие аннотация манифест никакой контейнер мочь запуститься причина некорректный настройка раскатка multus cni сразу обращать внимание файл etccninetd00multusconf  cniversion 031 name multuscninetwork type multus capabilities portmappings true kubeconfig etccninetdmultusdmultuskubeconfig delegates   cniversion 031 name  будущий версия containerd это срабатывать сегодня каждый запуск узел kubernetes файл обновляться корректный работа значение cniversion должно 031 добавлять определение сеть  apiversion k8scnicncfiov1 kind networkattachmentdefinition metadata   name macvlanconf spec   config        cniversion 031       plugins                     type macvlan           capabilities  ips true            master cni0           mode bridge           ipam              type static             routes                                 dst 00000                 gw 1721611                                                               apiversion k8scnicncfiov1 kind networkattachmentdefinition metadata   name macvlanprivconf spec   config        cniversion 031       plugins                     type macvlan           capabilities  ips true            master enp2s0f1           mtu 1500           mode bridge           ipam              type static                                 специально написать mtu 1500 приватный сеть знать требоваться jumbo packets mtu 9000 получать предупреждение развертывание grid журнал страшный просто настройка потребоваться немало работа который входить текущий план вполне оказываться 20 ускорение ",
    "tags": [
        "oracle",
        "rac"
    ]
}
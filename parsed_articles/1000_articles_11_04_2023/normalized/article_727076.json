{
    "article_id": "727076",
    "article_name": "Партицирование в GreenPlum 7: рекурсия и наследование",
    "content": "важно понимать поведение рекурсия наследование получать правильный парадигма партицирование  предыдущий статья  разбираться новый команда greenplum 7 изменение легасикоманда ключевой слово only указывать ключевой слово  only  предполагаться рекурсия допускать хотеть изменять метод доступ будущий раздел хотеть применяться существующий мочь сделать следующий  assuming partitioned table sales and all   of its child partitions are heap tables alter table only sales set access method ao_row секционировать таблица задавать подходящий способ доступ d sales                                 partitioned table publicsales  column      type       collation  nullable  default  storage  stats target  description   id      integer                                      plain                   date    date                                         plain                   amt     numeric102                                main                   partition key range date partitions jan_sales for values from 20230101 to 20230201 distributed by id access method ao_row существующий дочерний раздел приложение затрагивать d jan_sales                                     table publicjan_sales  column      type       collation  nullable  default  storage  stats target  description   id      integer                                      plain                   date    date                                         plain                   amt     numeric102                                main                   partition of sales for values from 20230101 to 20230201 partition constraint date is not null and date  20230101date and date  20230201date distributed by id access method heap grant onlyrevoke only также greenplum 7 мочь указывать ключевой слово  only   grantrevoke  который postgresql обращать внимание исторически greenplum такой поведение который  grantrevoke  родительский секционировать таблица рекурсивно выполняться ее дочерний раздел greenplum 7 придерживаться такой поведение добавлять опция  only  обеспечивать гибкость хотеть выполнять рекурсия простой пример использование  lets say at some point you want two roles with read permission   on our sale partitioned table but one for existing partitions  and another for future partitions   1 grant only on the parent table for just future partitions grant select on only sales to role_that_can_read_only_future_partitions   2 wo only this will grant for all existing partitions  then revoke only for parent to limit permission for future partitions grant select on sales to roles_that_can_read_only_existing_partitions revoke select on only sales from roles_that_can_read_only_existing_partitions dwhна основеgreenplum создание новый дочерний таблица правило создание новый таблица качество дочерний раздел наследоваться свойство родительский таблица начинать таблица  sales  create table sales id int date date amt decimal102 using ao_row distributed by id partition by range date мочь использовать тип синтаксис создание новый таблица качество дочерний раздел  create child partition using the new greenplum 7 syntax create table jan_sales partition of sales for values from 20230101 to 20230201   create child partition using the legacy syntax alter table sales add partition feb_sales start 20230201 end 20230301 оба дочерний раздел унаследовать метод доступ родительский таблица ориентированный добавление строка  ao_row  d sales                                 partitioned table publicsales  column      type       collation  nullable  default  storage  stats target  description   id      integer                                      plain                   date    date                                         plain                   amt     numeric102                                main                   partition key range date partitions jan_sales for values from 20230101 to 20230201             sales_1_prt_feb_sales for values from 20230201 to 20230301 distributed by id access method ao_row  d jan_sales                                     table publicjan_sales  column      type       collation  nullable  default  storage  stats target  description   id      integer                                      plain                   date    date                                         plain                   amt     numeric102                                main                   partition of sales for values from 20230101 to 20230201 partition constraint date is not null and date  20230101date and date  20230201date compression type none compression level 0 block size 32768 checksum t distributed by id access method ao_row  d sales_1_prt_feb_sales                               table publicsales_1_prt_feb_sales  column      type       collation  nullable  default  storage  stats target  description   id      integer                                      plain                   date    date                                         plain                   amt     numeric102                                main                   partition of sales for values from 20230201 to 20230301 partition constraint date is not null and date  20230201date and date  20230301date compression type none compression level 0 block size 32768 checksum t distributed by id access method ao_row split partition split partition   особенный кейс новый дочерний раздел создаваться существующий дочерний раздел случай новый раздел быть наследовать родительский секционировать таблица разделять дочерний предполагать какойто причина сделать раздел  feb_sales  наш пример иметь метод доступ отличный родительский alter table sales_1_prt_feb_sales set access method ao_column разделять новый раздел alter table sales  split partition feb_sales at 20230215 into  partition feb_first_half partition feb_second_half новый раздел быть иметь метод доступ отличный родительский обращать внимание исходный раздел  feb_sales  исчезать d sales                                 partitioned table publicsales  column      type       collation  nullable  default  storage  stats target  description   id      integer                                      plain                   date    date                                         plain                   amt     numeric102                                main                   partition key range date partitions jan_sales for values from 20230101 to 20230201             sales_1_prt_feb_first_half for values from 20230201 to 20230215             sales_1_prt_feb_second_half for values from 20230215 to 20230301 distributed by id access method ao_row  d sales_1_prt_feb_first_half                                                      table publicsales_1_prt_feb_first_half  column      type       collation  nullable  default  storage  stats target  compression type  compression level  block size  description   id      integer                                      plain                  none              0                  32768        date    date                                         plain                  none              0                  32768        amt     numeric102                                main                   none              0                  32768       partition of sales for values from 20230201 to 20230215 partition constraint date is not null and date  20230201date and date  20230215date distributed by id access method ao_column options blocksize32768 compresslevel0 compresstypenone checksumtrue  этот поведение наследование  split partition  оставаться такой greenplum 6 присоединение существующий таблица рассматривать кейс создавать новый таблица просто присоединять существующий таблица качество дочерний раздел случай исходный свойство таблица сохраняться становиться дочерний раздел предполагать изначально таблица  recent_sales  который продолжать часто обновлять умолчание использовать  heap  accessметод create table recent_sales id int date date amt decimal102  d recent_sales                                   table publicrecent_sales  column      ty",
    "tags": [
        "субд",
        "рекурсия",
        "наследование",
        "keyword",
        "keywords",
        "greenplum",
        "postgresql"
    ]
}
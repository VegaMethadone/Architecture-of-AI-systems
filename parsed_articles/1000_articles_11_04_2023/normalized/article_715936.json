{
    "article_id": "715936",
    "article_name": "Обзор технологии Ultra-Wideband на основе трансивера DW1000 (переходник с SPI на UWB)",
    "content": "текст написать свой опыт работа uwb текст помогать понимать сторона подходить uwb трансивер предисловие ultrawideband uwb это маломощный 1mw беспроводный радио технология передача данные скорость 6 mbits расстояние 200м этот технология также позволять измерять расстояние трансивер точность 10см uwb работать частота 31ghz 106ghz технология uwb очень широкий ширина канал 500mhz13ghz это lora минимум 1000 uwb использовать называть  pulse radio  трансивер посылаться пульс вейвлет порядок 1 миллиард секунда uwb передавать данные специальный временной интервал модуляция называться pulseposition time modulation качество аналогия сравнивать летучий мышь практический часть существовать модуль dwm1000 компания decawave qorvo это беспроводной полудуплексный трансивер работать частота 35 ghz to 65 ghz управляемый мощность излучение способный передавать данные битовый скорость 68mbits   это блок схема модуль попробовать разбираться способный чип  спецификация    doc name pages версия 1 product overview 33 характеристика модуль блок схема soc распиновка 2 product information dwm1000 2 флайер модуль dwm1000 5 dw1000 user manual 249 детализация регистр 11 sources of error in dw1000 based twoway ranging twr schemes 22 aps011 application note 11 9 debugging dw1000 based products and systems 23 aps022 application note 13 10 dw1000 device driver application programming interface api guide 101 using api functions to configure and program the dw1000 uwb transceiver 27 7 aps013 application note 15 the implementation of twoway ranging with the dw1000 23 8 antenna delay calibration of dw1000based products and systems 15 aps014 application note 12 3 product brief dw1000 2 флайер чип dw1000 название пин 4 product overview 53 распиновка dw1000 6 dw1000 errata 12 список 5ти выявлять ошибка дизайн чип  первый приближение внутри dw1000 обнаруживать pll модуль прием модуль передатчик цифровой логика spi slave преобразователь питание подробный схема чип dw1000 такой заметно otp помехоустойчивый кодирование управление мощность выявление приход пакет внутренний таймер чип весьма весьма прорабатывать соответствие модуль пина  dwm1000 это детализация распиновка модуль  dwm1000  шаг пина 14мм внутри dwm1000 закладывать asic название dw1000 список пин httpsdocsgooglecomspreadsheetsd1ei8ra8kbt_4zf_2shuhihzm8qjjmsjs_8kkttmakeditgid0 явный соответствие 48ми пин чип dw1000 24 пина модуль dw m 1000 известно комбинаторика упорядоченный выбирать провод 24 48 провод повторение 2000797e37 способ визуально ясно чип скрывать саркофаг подключать модуль dwm1000 приходиться изготавливать pcb платупереходник схема подключение схема подключение показывать физически приходиться собирать прототип управление модуль dwm1000 интерфейс spi компания разработчик qorvo предоставлять свой драйвер чип dw1000 драйвер скачать  httpswwwqorvocomproductspdw1000documents  достаточно скачать архив dw1000_api_rev2p14zip распаковывать папка dw1000_api_rev2p14_stswsrc лежать скод драйвер пример оригинальный драйвер 101 функция  перечень посмотреть  документация драйвер док dw1000 device driver application programming interface api guide указывать функция отвечать чип полностью управляться интерфейс spi частота тактирование 20 mhz данные передаваться старший битый вперед dwm1000 выступать ведомый устройство параметр spi соединение задаваться выбор напряжение пина gpio5 gpio6 умолчание подтянутый земля физически spi это полный дуплекс однако устройство обмен менее полудуплексный dwm1000  воспринимать данные провод cs 0v каждый отрицательный фронт котироваться начало новый кадр поэтому просто припаивать cs земля модуль просто понимать начинаться пакет аппаратный cs подходить приходиться делать программный chipselect  чтение модуль dwm1000 отправлять данные младший байт вперед поэтому четко ложиться структура little endian процессор значение регистр dw1000  корректный инициализация оригинальный драйвер   num      name      file  offset len    val         0        dev_id  0x00  0x0000   4  3001cade  1101_1110_1100_1010_0000_0001_0011_0000    1           eui  0x01  0x0000   8  00000000ffffffff      2        panadr  0x03  0x0000   4  ffffffff  1111_1111_1111_1111_1111_1111_1111_1111    3       sys_cfg  0x04  0x0000   4  00124000  0000_0000_0100_0000_0001_0010_0000_0000    4      sys_time  0x06  0x0000   5  00d6c2ce00      5      tx_fctrl  0x08  0x0000   5  09800a0000      6       dx_time  0x0a  0x0000   5  0000000000      7       rx_fwto  0x0c  0x0000   2      0000  0000_0000_0000_0000    8      sys_ctrl  0x0d  0x0000   4  00000000  0000_0000_0000_0000_0000_0000_0000_0000    9      sys_mask  0x0e  0x0000   4  00000000  0000_0000_0000_0000_0000_0000_0000_0000   10    sys_status  0x0f  0x0000   5  0200800000     11      rx_finfo  0x10  0x0000   4  0980aa10  0001_0000_1010_1010_1000_0000_0000_1001   12      rx_fqual  0x12  0x0000   8  5c001a451031cf2d     13      rx_ttcki  0x13  0x0000   4  0000fc01  0000_0001_1111_1100_0000_0000_0000_0000   14      rx_ttcko  0x14  0x0000   5  edff07391f     15       rx_time  0x15  0x0000  14  004566db052cbb3541008066db05     16       tx_time  0x17  0x0000  10  34a6d7b4590066d7b459     17       tx_antd  0x18  0x0000   2      3440  0100_0000_0011_0100   18     sys_state  0x19  0x0000   4  00050540  0100_0000_0000_0101_0000_0101_0000_0000   19    ack_resp_t  0x1a  0x0000   4  00000000  0000_0000_0000_0000_0000_0000_0000_0000   20      rx_sniff  0x1d  0x0000   4  0000adde  1101_1110_1010_1101_0000_0000_0000_0000   21      tx_power  0x1e  0x0000   4  2202080e  0000_1110_0000_1000_0000_0010_0010_0010   22     chan_ctrl  0x1f  0x0000   4  22007a4a  0100_1010_0111_1010_0000_0000_0010_0010   23     agc_ctrl1  0x23  0x0002   2      01de  1101_1110_0000_0001   24     agc_tune1  0x23  0x0004   2      9b88  1000_1000_1001_1011   25     agc_tune2  0x23  0x000c   4  07a90225  0010_0101_0000_0010_1010_1001_0000_0111   26     agc_tune3  0x23  0x0012   2      3500  0000_0000_0011_0101   27     agc_stat1  0x23  0x001e   3    000000  0000_0000_0000_0000_0000_0000   28       ec_ctrl  0x24  0x0000   4  0400adde  1101_1110_1010_1101_0000_0000_0000_0100   29       ec_rxtc  0x24  0x0004   4  00000000  0000_0000_0000_0000_0000_0000_0000_0000   30       ec_golp  0x24  0x0008   4  00deadde  1101_1110_1010_1101_1101_1110_0000_0000   31     gpio_mode  0x26  0x0000   4  000000de  1101_1110_0000_0000_0000_0000_0000_0000   32      gpio_dir  0x26  0x0008   4  ff01adde  1101_1110_1010_1101_0000_0001_1111_1111   33     gpio_dout  0x26  0x000c   4  000000de  1101_1110_0000_0000_0000_0000_0000_0000   34     gpio_irqe  0x26  0x0010   4  0000adde  1101_1110_1010_1101_0000_0000_0000_0000   35     gpio_isen  0x26  0x0014   4  0000adde  1101_1110_1010_1101_0000_0000_0000_0000   36    gpio_imode  0x26  0x0018   4  0000adde  1101_1110_1010_1101_0000_0000_0000_0000   37     gpio_ibes  0x26  0x001c   4  0000adde  1101_1110_1010_1101_0000_0000_0000_0000   38     gpio_iclr  0x26  0x0020   4  0000adde  1101_1110_1010_1101_0000_0000_0000_0000   39     gpio_idbe  0x26  0x0024   4  0000adde  1101_1110_1010_1101_0000_0000_0000_0000   40      gpio_raw  0x26  0x0028   4  000000de  1101_1110_0000_0000_0000_0000_0000_0000   41    drx_tune0b  0x27  0x0002   2      1600  0000_0000_0001_0110   42    drx_tune1a  0x27  0x0004   2      8d00  0000_0000_1000_1101   43    drx_tune1b  0x27  0x0006   2      6400  0000_0000_0110_0100   44     drx_tune2  0x27  0x0008   4  5e013b35  0011_0101_0011_1011_0000_0001_0101_1110   45    drx_sfdtoc  0x27  0x0020   2      4110  0001_0000_0100_0001   46    drx_pretoc  0x27  0x0024   2      0000  0000_0000_0000_0000   47    drx_tune4h  0x27  0x0026   2      2800  0000_0000_0010_1000   48   drx_car_int  0x27  0x0028   3    000000  0000_0000_0000_0000_0000_0000   49  rxpacc_nosat  0x27  0x002c   2      0000  0000_0000_0000_0000   50       rf_conf  0x28  0x0000   4  00000000  0000_0000_0000_0000_0000_0000_0000_0000   51    rf_rxctrlh  0x28  0x000b   1        d8  1101_1000   52     rf_txctrl  0x28  0x000c   3    a05c04  0000_0100_010",
    "tags": [
        "dwm1000",
        "ieee 802.15.4",
        "uwb",
        "nrf",
        "nrf5340",
        "nrf5340 dk",
        "radio",
        "asic",
        "dw1000",
        "rf"
    ]
}
{
    "article_id": "727250",
    "article_name": "Оценка производительности 1С + Postgres Pro при изменении различных параметров конфигурационного файла postgresql.conf",
    "content": "прошлый 2022 год заставлять компания пересматривать свой предпочтение выбор программный обеспечение часто встречаться кейс работа 1с использоваться субд postgresql вместо windows server использоваться linux ос цель данный статья являться изучение 2023 год производительность система 1с среда hyperv ос windows server 2019 взаимодействие сервер субд postgresql standart 139 ос debian 115 команда postgrespro материал описывать исследование зависимость параметр конфигурационный файл результат замер производительность изменение данные параметр состав тестовый стенд   аппаратный часть    supermicro x11dpli 2x intel xeon x 5690 34ghz each 6core  озу 128гб ddr3  хранилище raid 1 intel dc s3710ssdsc2ba400g401 400гб исследование проводить проверенный время аппаратный платформа supermicro 2011 год использование платформа intel gold связка скоростной диск большинство исследовать параметр оставаться рамка погрешность удаваться сгенерировать нагрузка замечать тенденция существенный изменение показатель    программный часть платформа 1спредприятие 83221750 конфигурация 1сerp управление предприятие 2 демо база тест полный 33 пользователь редакция 258179 объем база 42 гб  сервер приложение 1с ос windows server 2019 standard сервер база данные ос debian 115 postgres pro standart 139 примечание  рамка тестирование использовать стандартный шаблон фирма 1с  полный 33 пользователь безусловно использовать железо смочь вытягивать испытуемый наш цель отслеживать тенденция нагружать железо   общий методика тестирование рамка данный статья применять методика анализ использовать абсолютный значение погрешность описание методика определение абсолютный погрешность определять идеальный условие испытание наш случай это виртуальный сервер роль application сервер 1с windows сервер база данные подготовить конфигурация выполнять 3 тест apdex число пользователь 33 postgresql производить расчет абсолютный погрешность формула формула расчет абсолютный погрешность основной этап тестирование проводить замирать целевой значение проводиться 3 замер  тест полный конфигурация erp проводить серия основной испытание повторять весь исследовать значение проводиться уменьшение первый исследовать значение 100  провожать увеличение первый исследовать значение 100 значение положение onoff активировать деактивировать соответственно например компонент параллелизм тест 1скип апдекс основа методика апдекс лежать набор инструмент 1скип данный случай использоваться весь функционал методология использоваться стандартный демонстрационный база 1сerp сайт 1с стандартный методология апдекс использовать прогрессивный шкала 0 1 1  это замечательный результат 0  неудовлетворительный требоваться указывать целевой значение параметр производительность тот иной операция создавать сценарий запускать тест подготовка тестовый стенд   проводить установка базовый настройка носитель виртуальный машина операционный система  носитель виртуальный машина работа носитель производить твики биос данный случай необходимо вручную выставлять режим maximum perfomance расширенный настройка сриданный настройка применять участник тестирование power technology ставить custom power performance tuning нужно выбирать управлять питание bios ос наш опыт hyperv говорить выбор сторона os control energy_perf_bias_cfg mode ставить maximum performance настройка электропитание ос ставить производительность  результат наш манипуляция являться фиксированный режим turboboost частота процессор наш случай это 346 ггц   операционный система приложение    application сервер 1с устанавливать ос windows server 2019 standard устанавливать 1с сервер режим электропитание  максимальный производительность носитель виртуальный машина устанавливать ос windows server 2019 standard режим электропитание  максимальный производительность sql server устанавливать ос debian 115 устанавливать postgres pro 139 выделять ресурс виртуальный машина application сервер 1с 12 ядро цп и40гб озу sql сервер  10 ядро цп 30 гб озу параметр конфигурация рассчитывать исходить 20 гб озу запас рост производить проверка дисковый подсистема crystal disk mark настройка стандартный тест файл 32гб   результат тест crystal disk mark настройка postgres   подготовка исходный конфиг оформление заявка сайт  https1cpostgresru  наш почта приходить письмо команда wget httpsrepopostgresproru1c13keyspgprorepoaddsh sh pgprorepoaddsh продукт единственный postgres ваш машина хотеть сразу получать готовый употребление база aptget install postgrespro1c13 выполнять забывать это сменитьлокаль ru_ruutf8 задавать пароль учеток postgres провожать анализ файл  postgresqlconf  находиться адрес varlibpgpro1c13data большинство строка немой закомментировать часть настройка изменяться установка зависеть число ядро озу выделять вм это один изпреимущество продукт shared_buffers  5000mb  25 of ram temp_buffers  128mb work_mem  256mb maintenance_work_mem  256mb max_files_per_process  10000 max_parallel_workers_per_gather  0 max_parallel_maintenance_workers  3  количество cpu4 минимум 2 максимум 6 commit_delay  1000 max_wal_size  4gb min_wal_size  2gb checkpoint_timeout  15min effective_cache_size  15000mb  75 of ram from_collapse_limit  8 join_collapse_limit  8 autovacuum_max_workers  6  количество cpu2 минимум 2 vacuum_cost_limit  600  100 autovacuum_max_workers autovacuum_naptime  20s autovacuum_vacuum_scale_factor  001 autovacuum_analyze_scale_factor  0005 max_locks_per_transaction  256 escape_string_warning  off standard_conforming_strings  off shared_preload_libraries  online_analyze plantuner online_analyzethreshold  50 online_analyzescale_factor  01 online_analyzeenable  on online_analyzeverbose  off online_analyzemin_interval  10000 online_analyzetable_type  temporary plantunerfix_empty_table  on random_page_cost  10  effective_io_concurrency  1 это наш основной эталонный конфиг старт тест исследовать элемент этап тестирование тест 123  определение погрешность стоковый значение тест 4  random_page_cost  40 тест 5  effective_io_concurrency  400 тест 6  shared_buffers  2500mb тест 7  shared_buffers  10000mb тест 8 комплексный значение max_parallel_workers_per_gather  4 max_parallel_maintenance_workers  3  количество cpu4 минимум 2 максимум 6 max_worker_processes  10 max_parallel_workers  10 проходиться кратко основной значение shared_buffers  5gb  25 of ram  задавать объем память который использовать сервер база данные буфер разделять память согласно рекомендация команда postgres pro рекомендовать значение 25 озу сервер sql temp_buffers  128mb задавать максимальный объем память выделять временный буфер каждый сеанс существующий рамка сеанс буфер использоваться исключительно работа временный таблица work_mem  256mb задавать базовый максимальный объем память который использоваться внутренний операция обработка запрос например сортировка хештаблица прежде быть задействовать временный файл диск maintenance_work_mem  256mb задавать максимальный объем память операция обслуживание бд частность vacuum create index alter table add foreign key max_parallel_workers_per_gather  0 количество воркер который запускаться узел это основополагающий настройка выставлять ноль параллелизм отрабатывать работать процесс оператор оптимизатор запрос принимать решение запрос нужно применять параллелизм смотреть параметр определять сколько нужно воркер выполнять оператор запрос max_parallel_maintenance_workers  3  количество cpu4 минимум 2 максимум 6 задавать максимальный число рабочий процесс который мочь запускаться один служебный команда max_wal_size  16gb min_wal_size  4gb минимальный максимальный размер файл журнал предзапись effective_cache_size  15000mb  75 of ram параметр влиять планировщик запрос ограничивать дисковый кеш выше вероятность применяться сканирование индекс ниже вероятно выбирать последовательный сканирование random_page_cost  10 задавать приблизительный стоимость чтение один произвольный страница диск значение умолчание равный 40 хранилище который стоимость произвольный чтение ненамного высокий последовательный например тве",
    "tags": [
        "1c",
        "тестирование по",
        "postgres",
        "1с предприятие",
        "1с сервер",
        "1с:предприятие"
    ]
}
{
    "article_id": "728826",
    "article_name": "Как перезапускать упавшие тесты параллельно",
    "content": "тест часто бывать нестабильный тест падать попробовать перезапускать несколько перезапуск мочь увеличивать время сборка 23 раз статья рассказывать мы удаваться решать проблема также поделиться инструмент параллельный перезапуск упасть тест который разрабатывать наш инженер проект автотест wrike находиться 53 000 тест который запускать 80150 поток зависимость сборка часто больший часть время сборка занимать перезапуск несколько тест который использовать поток хотеть сокращать время сборка время работа платить динамический агент teamcity динамический окружение выглядеть пример таймлайн сборка allure этот сборка потратить 50 90 секунда работа перезапуск один тесто хотеть уменьшать время перезапуск тест счет использование больший количество поток  проблема долгий перезапуск тест junit 5 проект автотест использовать java 17 junit 5 maven инструмент сборка поэтому тест запускаться maven surefire plugin рано использовать junit 4 maven surefire plugin перезапускать упасть тест каждый класс дожидаться окончание первый запуск повторный запуск тест 1 2 ждать завершение тесто 3 junit 4 условие тест находиться разный класс переход junit 5 maven surefire plugin сначала ждать завершение запуск тест 3 перезапускать тест 1 2 это увеличивать время сборка тест проект большой количество класс повторный запуск тест 1 2 ждать завершение тесто 3 junit 5 тест находиться разный класс рост количество модуль проект maven этот проблема становиться ощущаться остро  каждый модуль ждать запуск тест завершаться перезапускать тест запускаться тест следующий модуль  частично решать проблема помощь самописный инструмент merger который уменьшать время сборка помощь объединение несколько maven модуль прочитывать  статья  внедрение merger повторный запуск тест мочь занимать большой часть время сборка см повтор тесто 3 изображение высокий случай тест находиться один модуль мы голова приходить идея перезапускать тест параллельно ждать пока тест упасть несколько подряд перезапуск занимать гораздо мало время тест быть считать прошедшее проходить хотя параллельный перезапуск таймлайн выглядеть каждый тест перезапуститься несколько параллельно это увеличивать количество повтор каждый тесто уменьшать время сборка также статистика неуспешный тест быть запускаться больший количество оставаться вопрос быть перезапускать параллель тест иметь процент успех перезапускать последовательно решать реализовать параллельный перезапуск проверять этот готовый решение параллельный перезапуск находить пробовать модифицировать  расширение junit 5   junitpioneer  оно реализовать testtemplate  это значить использовать другой testtemplate например параметризовать тесто смочь см  issue  причина получаться модифицировать repeatedtest  это testtemplate который также работать параметризовать тесто junit 5 умолчание  поддерживать  последовательный перезапуск решать расширять класс  junitplatformprovider  maven surefire plugin который уметь перезапускать тест последовательно реализация параллельный перезапуск время реализация сталкиваться два серьезный проблема allure отчет помечать тест упавший проходить стандартный механизм синхронизация junit 5 работать рамка один запуск тест это значить параллельный перезапуск быть правильно работать аннотация  resourcelock   execution   isolated  исправлять отчет allure параллельный перезапуск возникать ситуация allure отчет тест отмечаться упавший тк ранний перезапуск завершаться успех поздний  провал это следствие результат каждый тест отсортировывать время начало тест хотеть проходить хотя тест помечаться успешный необходимо упасть результат стартовать рано успешный логика определение порядок перезапуск поменять перезапуск сортироваться непосредственно составление allure отчет файл результат этот файл заменять время начало неуспешный попытка тесто время начало запуск набор тест это решение гарантировать сортировка результат успешный повтор оказываться последний allure предоставлять возможность изменять результат тесто testlifecyclelistener помощь изменять время начало прошедший попытка параллельный запуск время реальный запуск тесто необходимость записывать отдельный allure label этот изменение проходить хотя тест помечаться проходить успешный неуспешный попытка прогон кроме последний быть записывать перезапуск тесто allure реальный масштаб тест стартовать одновременно сдвиг несколько миллисекунда заметный таймлайн ниже приводить пример параллельный перезапуск один тесто сдвиг время начало сдвиг время начало занимать десятый доля пиксел визуально влиять таймлайн проблема поддержка механизм синхронизация junit 5 рамка один запуск тест выполняться поэтому параллельный перезапуск приходиться делать несколько запуск параллель также параллельный запуск мочь помещаться отводить количество поток поэтому необходимо разделять тест разный запуск картинка видно мочь перезапускаться тест 6 отводить поток junit 5 производить синхронизация тест рамка один запуск поэтому параллельный перезапуск игнорировать аннотация junit 5 синхронизация  resourcelock   execution   isolated  пример высоко повтор тесто 1 быть исполнять параллельно класс тест иметь аннотация  resourcelock   execution   isolated  использовать метод синхронизация junit 5 тесто наш тест полностью независимый друг друг использовать метод синхронизация junit 5 приходиться дорабатывать логика перезапуск запускать такой тест отдельно условие который тест перезапускаться параллельно отказываться идея перезапускать тест параллель перезапускать тест параллель попытка перезапуск помещаться отводить количество поток  количество оставаться перезапуск  количество падение  количество поток использовать запуск тест тест оставаться перезапускать один раз иначе параллельный перезапуск ничто отличаться последовательный условие список высоко соблюдать делать последовательный перезапуск проверять условие заново пока упасть тест быть перезапускать заданный количество низкий приводить блоксхема алгоритм запуск перезапуск тест результат внедрение параллельный перезапуск внедрение параллельный перезапуск добиваться ускорение сборка примерно 10 рост количество тест сборка 26 такой ускорение даваться мы бесплатно собирать статистика 10 млн запущенный тест     внедрение параллельный перезапуск вычислять эффективность разный перезапуск наш проект инфраструктура тип перезапуск доля успешно перезапускать тест  4 последовательный 489 3 последовательный 478 4 параллельный 472 2 последовательный 461 1 последовательный 42 таблица сделать следующий вывод 4 параллельный перезапуск успешно перезапускать тест 52 сравнение один перезапуск занимать такой количество время 4 параллельный перезапуск успешно перезапускать 17 мало тест 4 последовательный перезапуск работать гораздо быстро разбирать пример значит доля перезапускать тест запускать 10 тест 6 упасть перезапуск 3 6 упасть тест проходить это значит доля успешно перезапускать тест равный 50 3  6  50 этот метрика показывать насколько перезапуск помогать тесто проходить успешно таймлайн который объясняться такой доля успешно перезапускать тест основной цель параллельный перезапуск  ускорение сборка тесто добиваться ускорение первый время доля успешный перезапуск тест сильно упасть это случаться число изза становиться нагружать инфраструктура рано находить узкий место исправлять ошибка параллельный перезапуск становиться успешный почему параллельный запуск оказываться такой успешный инфраструктура выдерживать такой количество параллельный перезапуск временный недоступность сервис негативно сказываться успешность параллельный перезапуск попытка запускаться одновременно продолжать настраивать параллельный перезапуск улучшать инфраструктура тест однако вопрос нужно перезапускать тест быстро успешность падать оставаться открытый изза количество автотест наш проект постоянно расти часто сталкиваться новый проблема решение оказываться успешный компромиссный приводить глубокий понимание инфраструктура улучшение проект мочь попробовать параллельный перезапуск скачать исходный код  wrike github  продолжать работать паралле",
    "tags": [
        "java",
        "maven",
        "junit5",
        "тестирование",
        "allure",
        "автоматизация",
        "автотесты",
        "qaa",
        "sdet"
    ]
}
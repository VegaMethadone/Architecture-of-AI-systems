{
    "article_id": "725284",
    "article_name": "Как быстрее узнать, что сервису плохо, или Realtime-детекция разладок с помощью CatBoost",
    "content": "любой высоконагруженный система ежесекундный проходить огромный поток трафик релиз хотфикс ddosатаки невалидный ухудшать эксперимент многий другой событие мочь приводить проблема который влиять пользователь поэтому такой ситуация терпеть задержка проводить простой аналогия чемто заболевать узнавать рано самый минимизировать побочный эффект процесс выздоровление сервис быть баннерный крутилка поиск маркетплейс онлайндоставка пицца звать владимир точилин работать группа развитие рекламный продукт стабильность вместе свой коллега александр самусенко рассказывать создавать новый инструмент realtimeдетекции разладка прод рекламный технология работать система отдельный кластер нагрузка превышать 1000000 rps исследование причина аномалия  занимательный задача который мы приходиться решать повседневно сегодня сфокусироваться получаться максимально быстро зажигать лампочка определенный проблема система  история интересно прочитывать аналитик разработчик менеджер любой уровень фрод мониторинг любой сервис придумывать сотня метрика  рекламный технология исключение часть носить технический характер понимать узкий специалист часть понятный все например показ клика деньги ctr конверсия показ клика cpc стоимость клика внимательно следить такой метрика поскольку поведение отличаться ожидать система мочь проблема давать посмотреть пример такой необычный поведение разладочный тренд синий относительно здоровый зеленый оба случай видный  характерный резкий падение метрика вниз  отражать потенциальный проблема система первый случай явный второй  показ мочь упасть резко изза изменение поведение пользователь это резко переставать показывать баннер площадка далее быть называть такой падение  разладка  разладка вверх являться сигнал возможно чтото идти один особенность интернетреклама являться наличие мошенник который всячески пытаться истощить бюджет рекламодатель приносить реальный конверсия накрутка просмотр клик конверсия бот либо помощь другой механизм называть  фрод  зачастую это происходить массово видно график невооруженный взгляд борьба такой ситуация вести наш система антифрод помощь свой алгоритм давать списывать деньги рекламный кампания данный действие ее работа сервис биллинг увеличивать время получение данный реальный показ клика деньги связь этот вид тренд  чистый  антифрод биллинг  быстрый  лет 2022 год класс детектор разладка пул мониторинг очищать фрод данные лаг получас  основной принцип работа основывать классический метод статистика выбирать случайный величина проверять принадлежность доверительный интервал который очередь являться нестационарный функция сезонность шаг 5 10 30 минута мало шаг широко доверительный интервал мало время реакция несмотря высокий полнота пул некоторый разладка система поймать час поздно наш понимание мониторинг достигать свой пик увеличивать полнота сильно уменьшать точность наоборот пул мониторинг который основывать принцип работать поверх быстрый данные  изза периодический наплыв фрод самый высокий точность низкий полнота подобный род разладка синий график интересовать трафик обнулять  смысл лишний зажигать лампочка пример наплыв фродер резкий ступенька вниз этот точка означать возвращение нормальный состояние точность мониторинг очень важный иначе никто реагировать научаться различать реальный просадка быстрый тренд фродовой шум узнавать проблема среднее полчаса рано дебаг проблема начинаться заметно рано значит получаться приводить система здоровый состояние минимальный потеря мониторинг критично важный характеристика  точность   полнота   время реакция  существовать алгоритм чистый данные проблема время реакция данные фрод  недостаточный точность полнота сделать явный статистический правило хороший характеристика полнота точность быстрый неочищенный данные практически невозможно поэтому решать обучать классификатор задача разбивать несколько этап собирать обучать данные лог размечать разладка придумывать фактор зафиксировать приемочный метрика обучать модель построить регулярный процесс поставка данный сделать пайплайн доразметка дообучение учить классификатор искать разладка сбор данные получение обучать выборка ноль оказываться самый трудоемкий этап задача качество база подготовка датасет выгружать логово реальный тренд клик главный срез январь 2021 год август 2022 год причем выгружать очищать фрод данный грязный разметка должный показывать классификатор такой такой плохо такой образ отфильтровывать фродовый шум тренд фокусироваться раскладка вниз тк разладка вверх тяжело отделять наплыв фрод  график быть выглядеть одинаково оставлять поиск мониторинг чистый данный размечать рука столько данный безумно нерациональный поэтому определение потенциальный разладка чистый данные запускать аналог статистический мониторинг первый группа узкий доверительный интервал это нужно получать ручной разметка датасет получать recall  1 подсветиться таймстемп помечать подозрительный разметка данный потенциальный разладка выгружать таблица вместе команда сделать экспертный разметка несколько итерация первый подход получаться неидеально каждый немного разный понимание стоить звенеть процесс фильтрация разметка итог вывести основной правило разметка разладка обучать выборка должный заметный чистый данные зашумлять переразметка выкидывание лишний точка получаться набор примерно 4050 разладка каждый срез процесс отладка помогать генерация pdfфайла график ряд помечать помечать проблемный гораздо удобно увидеть идти вход модель перепроверять внутренний дашборда список дата например удаваться обнаруживать какойто момент слетать сортировка точка датафрейм вместо нормальный ряд вход подаваться битый последовательность точка график последний точка явно разладка  клика расти вверх далее разметка соединяться агрегат неочищенный данные именно быть подаваться вход классификатор такой образ получать датасет органический данные модель качество модель использовать catboost classifier входной данные представлять себя табличка который значение клик каждый точка добавлять хвост клик предыдущий слово описание резкий падение важный абсолютный значение клик точка безразмерный отношение соседний особенность последний dt_i  clicks_i  clicks_i1 подобный переход соседний пятиминутка выборка вынести признак помимо выделять следующий фактор модель мочь разграничивать здоровый нездоровый тренд разница клик медиана окно модуль разница ско последний точка ско последний точка отношение клик средний окно категориальный индекс пятиминутка тридцатиминутка час внутри день также день неделя  is_weekend  обучение стандартный сезонность тренд отношение сумма клик последний 30 минута предыдущий 30 минута maxclicksclicks_1 clicksclicks_2 clicksclicks_3   отношение максимум сильно мало 1 это признак явный проблема посмотреть пример похоже разладку это  это отплывать фрод большой отношение клик предыдущий точка относительно давать  dt_click_fall  разница медиана точка маленький этот фактор различать  click_median_diff  сделать вывод хвост это просадка это разладка большой  dt_click_fall  значительный отрицательный дифф медиана  click_median_diff  среди гиперпараметр catboost классификатор особенно полезный корректировка весы класс  class weights  частичный компенсация дисбаланс итог получаться вполне рабочий модель который мочь отличать разладку фрод метрика первый итерация разметка модель это метрика переразметка доработка catboost итоговый feature importance один срез генерация синтетика обучение catboost органический данные получать модель оповещать разладок средний раз три возможный результат намного статистический мониторинг шумный данные становиться смотреть какой пример классификатор справляться какой очень удивление обнаруживать среди false negatives самый явный просадка тестовый часть датасет тренд падать окрестность ноль подсвечиваться классификатор подтверждать гипотеза модель плохо ловить именно сильный разладка сгенерировать синтетический тестсет пример очень плохой разладка например стабильный хвост точка падать ноль клик результат воспроизводиться это логичный пред",
    "tags": [
        "аналитика",
        "стабильность",
        "catboost",
        "мониторинг",
        "machine learning",
        "временные ряды",
        "антифрод",
        "аномалии"
    ]
}
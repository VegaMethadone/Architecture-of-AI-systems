{
    "article_id": "728058",
    "article_name": "Тестирование 1С в российских облаках: Cloud, Yandex Cloud, МТС, Selectel, VK Cloud",
    "content": "Сегодня в России доступно множество облачных сервисов, каждому из которых присущи определенные особенности, достоинства и недостатки. Где-то использована классическая виртуализация, где-то применяются платформенные облака, где-то мощнее процессоры, где-то они слабее, отличается скорость жестких дисков и т. д. Таким образом возникает множество параметров, которые необходимо учитывать при выборе. Особенно остро вопросы эффективности работы облачных сервисов стоят для крупных компаний. Наши клиенты не исключение. В силу того, что значительная часть из них использует продукты 1С:Предприятие, мы решили протестировать работу наиболее крупных и известных в России облачных сервисов и сравнить результаты. Под катом описание условий тестирования и результаты проведенных тестов. \nОбщие принципы  \nУчитывая, что критерии выбора облачных сервисов – многогранная задача, а на скорость может повлиять множество факторов, мы решили провести два типа тестов: синтетические и прикладные. Дело в том, что результаты синтетического тестирования зависят исключительно от “железа”, прикладное же позволяет увидеть, насколько эффективен сервис при использовании для конкретной задачи в реальных условиях. \nДля синтетического тестирования были использованы тесты Гилёва, хорошо знакомые 1С-специалистам, как инструмент оценки быстродействия 1С:Предприятия. Тестирование проводилось на двух конфигурациях, которые были условно названы ПРОФ и КОРП, соответственно редакциям 1С, так как у них отличия в количестве используемых CPU: до 12 для ПРОФ и больше 12 для КОРП. Каждый ландшафт тестирования состоял из 2-х виртуальных машин — сервера приложения и сервера БД. \nДля «ПРОФ»:\nСервер приложения 1С:Предприятие: 12vCPU/ОЗУ 96GB/129GB SSD\nСервер СУБД: 12vCPU/ОЗУ 96GB/129GB SSD\nДля «КОРП»:\nСервер приложения 1С:Предприятие: 32vCPU/ОЗУ 256GB/129GB SSD\nСервер СУБД: 32vCPU/ОЗУ 256GB/129GB SSD\nДля тестирования были выбраны следующие провайдеры: Cloud, Yandex Cloud, МТС, Selectel, VK Cloud.\nСинтетическое тестирование  \nТут ничего необычного. В каждом тестируемом облаке разворачивалась информационная система, в нее загружался тест Гилёва TPC+G1C 2.1.0.7 (\ngilev.ru\n). После завершения тестирования результаты вносились в соответствующие таблицы для проведения сравнения. Использовались ОС Linux — Ubuntu 20.04.5 LTS и платформа 1С:Предприятие версии 8.3.20.1838. Такая версия платформы 1С:Предприятие использовалась, так как у заказчика используется именно такая и обновление на новую версию ещё в планах.\nВ качестве СУБД применялись:\nPostgres Pro 1C 14.5 (PostgreSQL 14.5) для тех облаков, где не предоставляется PaaS сервис СУБД\nManaged Databases Selectel for PostgreSQL (14-1C)\nКонфигурации, тестируемые в каждом облаке со стоимостью ресурсов.\nСтоимость ресурсов взята из публичных прайсов.\nОблачный провайдер  \n«ПРОФ»  \nСтоимость ресурсов «ПРОФ», руб в мес. с НДС\n«КОРП»  \nСтоимость ресурсов «КОРП», руб в мес. с НДС  \nПримечание\nYandex Cloud (Standard)  \n12 vCPU/96 ГБ/129 ГБ SSD\nIntel Ice Lake 2.00 ГГц  \n29 961,99 + 29 961,99\n32 vCPU/256 ГБ/129 ГБ SSD\n Intel Ice Lake 2.00 ГГц\n77 337,99 +\n 77 337,99\nKVM  \nYandex Cloud (Compute Optimized)\n12 vCPU/96 ГБ/129 ГБ network-ssd Intel Ice Lake 3.00 ГГц\nнаходится в статусе закрытого превью\nKVM Новая платформа highfreq-v3  Еще нет в публичном доступе. \nYandex Cloud (Compute Optimized Dedicated)\n12 vCPU/96 ГБ/33 ГБ network-ssd + 3ТБ local-ssd Intel Ice Lake 3.00 ГГц\nнаходится в статусе закрытого превью\nKVM Новая платформа highfreq-v3 + Локальные быстрые диски. Еще нет в публичном доступе. \nCloud\nm7n.3xlarge.8 | 12 vCPUs | 96 GiBIntel Ice Lake 2.6GHz Ultra-high I/O: 129 GiB\n27 594,15 + 27 594,15\nm7n.8xlarge.8 |  32 vCPUs | 256 GiB Intel Ice Lake 2.6GHz Ultra-high I/O: 129 GiB \n71 423,35 + 71 423,35\nKVM\nMTSCloud\n12 vCPU/96 GBIntel Xeon Gold 6248R CPU @ 3.00GHzSSD Ultra: 129 GB\nНет данных\n32 vCPU/256 GBIntel Xeon Gold 6248R CPU @ 3.00GHzSSD Ultra: 129 GB\nНет данных\nVMWare\nVK Cloud\n12 vCPU/96 GB Intel Xeon Processor (Skylake, IBRS) @ 2.30GHz High-IOPS SSD (high-iops): 129 GB\n33 998 +      33 998\n32 vCPU/256 GB Intel Xeon Processor (Skylake, IBRS) @ 2.30GHz High-IOPS SSD (high-iops): 129 GB\n76 366 +      76 366\nKVM + OpenStack\nSelectel (Intel)\n12 vCPU/96 GBIntel(R) Xeon(R) Gold 6240R CPU @ 2.40GHz SSD Быстрый: 129 GB\n35 790,63 + 35 790,63\n32 vCPU/256 GB Intel(R) Xeon(R) Gold 6240 CPU @ 2.60GHz SSD Быстрый: 129 GB \n87 019,11 + 87 019,11\nKVM\nSelectel (AMD)\n12 vCPU/96 GB AMD EPYC 7742 64-Core Processor @ 2.25GHz SSD Быстрый: 129 GB Локальный диск: 1ТБ \n47 236,65 + 47 236,65\n32 vCPU/256 GBAMD EPYC 7742 64-Core Processor @ 2.25GHz   SSD Быстрый: 129 GB Локальный диск: 1ТБ\n98 465,13 + 98 465,13\nKVM\nSelectel (Intel + MDB)\n12 vCPU/96 GB Intel(R) Xeon(R) Gold 6240R CPU @ 2.40GHz\nSSD Быстрый: 129 GB  Фиксиров.:  16 vCPU, 64 ГБ RAM, 512 ГБ  \n35 760,63 + 35 214,08\n12 vCPU/96 GBIntel(R) Xeon(R) Gold 6240R CPU @ 2.40GHz\nSSD Быстрый: 129 GB\nФиксиров.: 32 vCPU, 128 ГБ RAM, 1024 ГБ\n87 019,11 + 70 428,15\nРазмеры MDB выбраны из достуных. Размеров совпадающих с целевыми – нет. \nРезультаты теста TPC  \nОблачный провайдер\n«ПРОФ»\n«КОРП»\nПримечание\nYandex Cloud (Standard)\n22.03\n23.47\nYandex Cloud (Compute Optimized)\n24.27\n—-\nНовая платформа \nIce Lake 3.0 Ghz\nYandex Cloud (Compute Optimized Dedicated)\n34.72\n—-\nНовая платформа \nIce Lake 3.0 Ghz\n + Локальные быстрые диски\nCloud\n39.37\n38,76\nCloud (MDB)\n-\n-\nНе запустилось, MDB не оптимизирована для 1С\nMTSCloud\n29.59\n27.78\nVK Cloud\n22.94\n27.62\nSelectel (Intel)\n19.38\n18.94\nSelectel (AMD)\n23.81\n24.39\nSelectel (Intel + MDB)\n17.24\n21.65\nYandex Cloud (Standard)\n«ПРОФ»\n«ПРОФ»\n«КОРП»\n«КОРП»\n«ПРОФ»\nYandex Cloud (Compute Optimized Dedicated)\n«ПРОФ»\nCloud\n«ПРОФ»\n«ПРОФ»\n«КОРП»\n«КОРП»\nMTSCloud\n«ПРОФ»\n«ПРОФ»\n«КОРП»\n«КОРП»\nVK Cloud\n«ПРОФ»\n«ПРОФ»\n«КОРП»\n«КОРП»\nSelectel (Intel)\n«ПРОФ»\n«ПРОФ»\n«КОРП»\n«КОРП»\nSelectel (AMD)\n«ПРОФ»\n«ПРОФ»\n«КОРП»\n«КОРП»\nSelectel (Intel + MDB)\n«ПРОФ»\n«ПРОФ»\n«КОРП»\n«КОРП»\nКак видно из приведенных результатов синтетического теста, все сервисы справились с ним хорошо. При этом можно выделить 3 явных лидера, а именно: Cloud, Yandex Cloud и МТС Cloud, результаты которых выделяются максимальной скоростью и предполагают большее рекомендуемое количество пользователей.\nПрикладное тестирование\nДля проведения прикладного теста было использовано меньше конфигураций, так как по результатам первых тестов стало ясно, что конфигурация не влияет на прикладные функции в заданных условиях. \nТаким образом в прикладном тестировании использовали: \nCloud — ПРОФ 12vCPU/96GB/128GB SSD\t\nYandex Cloud — ПРОФ 12vCPU/96GB/128GB SSD\t\nМТС — ПРОФ 12vCPU/96GB/128GB SSD\nYandex Cloud — ПРОФ 12vCPU/96GB/128GB SSD (выд. хост CPU 3,0Ггц)\nSelectel — ПРОФ 12vCPU/96GB/128GB SSD\t\nVK Cloud — ПРОФ 12vCPU/96GB/128GB SSD\nПрочие технические условия были идентичны синтетическому тесту:\nОС Linux - Ubuntu 20.04.5 LTS. \nПлатформа: 1С:Предприятие версии 8.3.20.1838\nСУБД:\nPostgres Pro 1C 14.5 (PostgreSQL 14.5) для тех облаков, где не предоставляется PaaS сервис СУБД\nYandex Managed Service for PostgreSQL (14-1c)\nManaged Databases Selectel for PostgreSQL (14-1C)\nТестирование проводилось по следующему сценарию:\nПодготовка тестовых баз на облаках\nОдновременный запуск регламентных заданий в тестовых базах на разных облаках\nОпределение времени выполнения по журналу регистрации\nСравнение результатов выполнения\n В качестве тестовой нагрузки при прикладном тестировании использовали отчеты: \nОтчет по бюджетированию БДР план/факт (годовой). Проводилось сравнение плановых данных, которые вводились в документах “Экземпляр бюджета” по каждому подразделению и статье бюджета, а также фактических данных из регламентированного и управленческого учета, собранных по условиям, описанным в источниках запросов по каждой статье бюджета. Соответственно, около 170 статей, которые могут иметь от 3 до 6 источников, собираются по 45 подразделениям компании. В общей сложности 460 000 транзакций.\nЗакрытие месяца, включавший:\nвзаиморасчеты и переоценка валютных средств;\nформирование затрат;\nраспределение производственных затрат;\nрасчет себестоимости;\nформирование фин. результата;\nотражение проводок в регламентированном учете.\nВ общей сложности —28 500 документов, для каждого из которых есть движения по 5-10 многострочным регистрам, около 500 000 транзакций.\nРезультаты прикладного тестирования   \nОблако\nКонфигурации\nВремя по журналу регистрации \nЗакрытие месяца\nБДР годовой\nCloud\nПРОФ 12vCPU/96GB/128GB SSD\n1ч 30м\n7ч 30м\nYandex Cloud\nПРОФ 12vCPU/96GB/128GB SSD\n2ч 10м\n8ч 00м\nМТС Cloud\nПРОФ 12vCPU/96GB/128GB SSD\n1ч 30м\n9ч 50м\nYandex Cloud - выделенный хост CPU 3,0 Ггц\nПРОФ 12vCPU/96GB/128GB SSD\n1ч 30м\n7ч 00м\nSelectel\nПРОФ 12vCPU/96GB/128GB SSD\n1ч 00м\n14ч 00м\nVK Cloud\nПРОФ 12vCPU/96GB/128GB SSD\n1ч 20м\n15ч 00м\nВ результате прикладного тестирования были выявлены 3 лидера (Yandex Cloud, Cloud и МТС). Yandex Cloud с выделенным хостом CPU 3,0 Ггц в настоящий момент находится в стадии Technical Preview и был предоставлен партнёрами из Yandex Cloud специально для этого исследования. Ожидается, что данная конфигурация станет доступна клиентам для коммерческого использования летом 2023 года. Интересно, что при работе с отчетами меньшего объема (закрытие месяца) Selectel и VK Cloud оказались быстрее, тогда как загрузка годового отчета заняла приблизительно в 2 раза больше времени, чем у Cloud и Yandex Cloud.  \nИтог  \nПолагаю, что цифры и скриншоты сказали больше, чем могу сказать я, оценивая результаты тестов. Обобщая, можно смело говорить о том, что конкуренция на рынке облачных сервисов хорошо отражается на их производительности. Мы ожидали большего различия между сервисами разных провайдеров и, в целом, более посредственных результатов от каждого. Надеюсь, что наше сравнение и опыт будет полезно тем, кто выбирает облако для работы с 1С:Предприятие. Если вы считаете, что таких материалов должно быть больше — напишите нам в комментариях.  \nДополнено: Учитывая, что часть комьюнити считает сравнение не корректным (т.к. тестировались стандартные предложения и одно в стадии Technical Preview, но не лучшие из доступных), осенью планируем провести  ещё  один расширенный тест. У нас  сейчас в тестировании дополнительные хостинг-провайдеры, у Yandex.Cloud dslqn из превью — новое железо, а у Selectel  возьмём конфигурации с 3Ггц, о которой писали в комментах.\nПользуясь случаем приглашаем на вебинар Cloud \n\"1С в облаке: как взять курс на снижение затрат\"\n. Убеждены, встреча будет полезна тем, кто планирует размещать 1С в облаках.\n \n ",
    "tags": [
        "1с в облаке",
        "cloud",
        "sbercloud",
        "yandex.cloud",
        "vkcloud",
        "selectel",
        "облачные сервисы",
        "тестирование облачных сервисов"
    ]
}
{
    "article_id": "727602",
    "article_name": "ChatGPT и кодинг для НЕпрограммиста",
    "content": "Дальше чем Hello World! на Python у меня так и не получилось продвинуться... Хочется творить, создавать что-то полезное, но все, более продвинутые коллеги вокруг утверждают, что раньше чем через год активных проб и ошибок ничего путного из-под моей клавиатуры не выйдет. \nЭта статья для тех, кто думает, что не сможет и поэтому даже не пробует. \n\"Если долго сидеть на берегу реки, то можно увидеть как мимо проплывёт труп твоего врага\" (Шон Коннери, фильм \"Восходящее солнце\", 1993).\nВуаля, GPT-4 (ChatGPT или GPT кому как нравится) доступен через \nbing.com/new\n (потребуется учетная запись в Microsoft и, возможно, немного подождать, зато, никакого гемора с VPN и переполнением очереди в \nchat.openai.com/chat\n). \nЗадача\nПроба пера была на простеньком скрипте для Google Docs (\nтут\n), теперь проблема следующая - при написании длинного текста в переводчике, ты не знаешь, насколько результат (переведенный текст) отражает изначально заложенную мысль. Чтобы случайно не ругнуться матом, например, во Вьетнаме, я всегда переводил результат перевода обратно с вьетнамского на русский. Соответственно, если в тексте попадалась ошибка, приходилось переписывать предложение на русском, переводить на вьетнамский и опять делать проверку. Все известные мне переводчики не обладают функцией мгновенного обратного перевода, значит, придётся его сделать. \nДалее привожу диалог с GPT практически без купюр (мои запросы здесь оформлены как цитаты, ответы GPT - как код), во время диалога код был существенно доработан, финальная версия в конце статьи! \nГлава первая. Начало\nсоздай код для интерент страницы переводчика, используя инструкции \nhttps://cloud.yandex.ru/docs/translate\n<html>\n<head>\n    <title>Переводчик</title>\n</head>\n<body>\n    <h1>Переводчик</h1>\n    <form action=\"translate.php\" method=\"post\">\n        <p>Введите текст для перевода:</p>\n        <textarea name=\"text\" rows=\"10\" cols=\"50\"></textarea>\n        <p>Выберите язык перевода:</p>\n        <select name=\"language\">\n            <option value=\"en-ru\">Английский - Русский</option>\n            <option value=\"ru-en\">Русский - Английский</option>\n            <option value=\"fr-ru\">Французский - Русский</option>\n            <option value=\"ru-fr\">Русский - Французский</option>\n            <option value=\"de-ru\">Немецкий - Русский</option>\n            <option value=\"ru-de\">Русский - Немецкий</option>\n        </select>\n        <p><input type=\"submit\" value=\"Перевести\"></p>\n    </form>\n</body>\n</html>\n<?php\n// Получаем текст и язык перевода из формы\n$text = $_POST['text'];\n$language = $_POST['language'];\n\n// Проверяем, что текст не пустой\nif ($text == \"\") {\n    echo \"Пожалуйста, введите текст для перевода.\";\n    exit;\n}\n\n// Получаем IAM-токен и идентификатор каталога из файла config.php\nrequire_once 'config.php';\n\n// Формируем URL для запроса к API Яндекс.Переводчика\n$url = 'https://translate.api.cloud.yandex.net/translate/v2/translate';\n\n// Формируем заголовки для запроса\n$headers = [\n    'Content-Type: application/json',\n    \"Authorization: Bearer $IAM_TOKEN\"\n];\n\n// Формируем данные для запроса\n$post_data = [\n    \"targetLanguageCode\" => $language,\n    \"texts\" => [$text],\n    \"folderId\" => $folder_id,\n];\n\n// Кодируем данные в формат JSON\n$data_json = json_encode($post_data);\n\n// Инициализируем cURL\n$curl = curl_init();\ncurl_setopt($curl, CURLOPT_HTTPHEADER, $headers);\ncurl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\ncurl_setopt($curl, CURLOPT_POSTFIELDS, $data_json);\ncurl_setopt($curl, CURLOPT_URL, $url);\ncurl_setopt($curl, CURLOPT_POST, true);\n\n// Выполняем запрос и получаем ответ\n$result = curl_exec($curl);\n\n// Закрываем cURL\ncurl_close($curl);\n\n// Декодируем ответ из формата JSON\n$result_json = json_decode($result, true);\n\n// Проверяем, что ответ содержит переведенный текст\nif (isset($result_json['translations'][0]['text'])) {\n    // Выводим переведенный текст на экран\n    echo \"<h1>Перевод</h1>\";\n    echo \"<p>\" . $result_json['translations'][0]['text'] . \"</p>\";\n} else {\n    // Выводим сообщение об ошибке\n    echo \"<h1>Ошибка</h1>\";\n    echo \"<p>\" . $result_json['message'] . \"</p>\";\n}\n?>\nКак я понял, нужно создать два файла, один из которых в формате HTML, а второй в формате PHP. Как я откуда-то помню, первый HTML-файл должен называться index.html, а название PHP-файла читаем в HTML-коде в 7 строке. Код ссылается на некий файл config.php. Как он может выглядеть, я представления не имею, поэтому, спросим об этом GPT. \nсоздай пример файла config.php\n<?php\n// Замените эти значения на свои\n$IAM_TOKEN = '<IAM-токен>';\n$folder_id = '<идентификатор каталога>';\n?>\nГлава следующая. Перипетия с авторизацией\nСобственно вот тут \nhttps://cloud.yandex.ru/docs/translate/operations/translate\n Яндексом подробно описано как получать токены и даже есть примеры для CLI (Интерфейс командной строки), Python и PHP. Сложность в том, что не понятно по какому пути нужно пойти, чтобы было быстро просто и без всяких там интерпретаторов, виртуальных машин и вот этого всего. Я хотел отправить код с HTML-страницы вместе с API-ключом, но нет же...\nСразу после получения IAM-токена, получите API-ключ (Яндекс предупреждает, что это менее секьюрно, зато не нужно настраивать автоматическое обновление IAM-токена каждые 12 часов) тут \nhttps://cloud.yandex.ru/docs/iam/operations/api-key/create\n. Далее меняем строку 21 в файле translate.php \"Authorization: Bearer $IAM_TOKEN\"на \"Authorization: Api-Key <API-ключ>\" или ссылку на него в соседнем файле $API_key.\nГлава еще одна. Кодировка\nтекст на странице выводится в таком виде \"РџРµС‚РµРІРѕРґС‡РёРє\" как поправить?\nТут GPT выдал 4 варианта, как поправить, но лучший я нашел сам на \nstackoverflow\n и добавил его в HTML-файл после тэга <head> (подсказка была в самом редакторе файлов). \n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"/>\nГлава об ошибочном понимании ИИ существующей действительности\nНа самом деле это уже вторая попытка сделать переводчик на сайте, первая с полным функционалом была написана по старым инструкциям Яндекса, поэтому в данной версии хотелось просто убедиться, что API-shmAPI работает... Оно так-то работает, но выдаёт ошибку при исполнении кода\nпри выполнении кода, выводится \"unsupported target_language_code: en-ru\" как исправить?\nДалее небольшой спор с ИИ, привожу для понимания его несовершенства (использует старые инструкции) и демонстрации пути обхода (спойлер - читаем инструкцию на Яндексе, делаем как там написано). \nВозможно, проблема в том, что вы используете неправильный код языка для параметра target_language_code. Вы должны использовать пару кодов языков ( \"откуда\" - \"куда\"), разделенных дефисом. Например, en-ru означает перевод с английского на русский. Вы также можете использовать только код целевого языка (например, ru). В этом случае сервис попытается определить исходный язык автоматически1.\nЧтобы исправить ошибку, вы можете попробовать следующее:\nПроверьте, что вы указали правильный код языка в параметре target_language_code. Вы можете получить список поддерживаемых языков с помощью метода getLangs2.\nПроверьте, что вы указали правильный ключ API в параметре key. Вы можете получить бесплатный ключ API на сайте Яндекс.Облака1.\nПроверьте, что вы указали правильный идентификатор каталога в параметре folderId. Вы можете найти его в своем личном кабинете1.\nчто нужно исправить в коде, если следующий пример считать верным? далее код с вкладки PHP на странице \nhttps://cloud.yandex.ru/docs/translate/operations/translate\nВ коде не нужно ничего исправлять, если следующий пример считать верным. \nЭтот код отправляет запрос к API Яндекс.Переводчика и получает ответ в формате JSON. \nВ ответе должен быть перевод слов \"Hello\" и \"World\" с английского на русский язык. \nПример ответа:\n{\n  \"translations\": [\n    {\n      \"text\": \"Привет\",\n      \"detectedLanguageCode\": \"en\"\n    },\n    {\n      \"text\": \"Мир\",\n      \"detectedLanguageCode\": \"en\"\n    }\n  ]\n}\ntargetLanguageCode указывается не парой языков, например, en-ru, а кодом одного языка, например ru\nНет, targetLanguageCode может указываться как парой языков, так и кодом одного языка. \nЕсли вы указываете пару языков, например en-ru, то вы задаете направление перевода с английского на русский. \nЕсли вы указываете код одного языка, например ru, то вы задаете целевой язык перевода, а исходный язык будет определен автоматически.\nпочему тогда сайт выдаёт \"unsupported target_language_code: ru-en\"?\nВозможно, сайт выдает эту ошибку, потому что вы указываете код языка в неправильном формате. \nВы должны использовать дефис (-), а не тире (–) для разделения кодов языков. \nНапример, en-ru, а не en–ru. Также убедитесь, что вы используете правильные коды языков. \nВы можете получить список поддерживаемых языков с помощью метода getLangs1.\n\n<К сожалению, для этой беседы достигнуто ограничение.> \n<Нажмите кнопку \"метла\", чтобы очистить это и продолжить общение.>\nДа, у Bing тоже есть свои недостатки (максимум 20 запросов на один диалог), пришлось самому догадаться заменить ru-en на ru, а en-ru - на en. Невеликое достижение, но после этого всё заработало и я \"...почил в день седьмой от всех дел Своих, которые делал\" (Быт. 2:2).\nЭпилог\nВашему вниманию предлагаются финальные версии файлов, которые нужно разместить в отдельной папке (поддомене) вашего сайта. Хоcтинг сайта, видимо, должен поддерживать PHP, но это не точно. Кстати, все комментарии тоже дело рук GPT. \nФайл index.html\n<html>\n<head>\n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"/> \n    <title>Переводчик</title>\n</head>\n<body>\n    <h1>Переводчик Yandex</h1>\n    <form action=\"translate.php\" method=\"post\">\n        <p>Введите текст для перевода:</p>\n        <textarea name=\"text\" rows=\"1\" cols=\"50\"></textarea>\n        <p>Выберите язык перевода:</p>\n        <select name=\"language\">\n            <option value=\"en\">en</option>\n            <option value=\"ru\">ru</option>\n        </select>\n        <p><input type=\"submit\" value=\"Перевести\"></p>\n    </form>\n</body>\n</html>\nФайл config.php\n<?php\n// Замените эти значения на свои\n$API_key = 'AQVNw5-----------------------EiFWg';\n$folder_id = 'b1go---------l4ps';\n?>\nФайл  translate.php\n<?php\n// Получаем текст и язык перевода из формы\n$text = $_POST['text'];\n$language = $_POST['language'];\n\n// Проверяем, что текст не пустой\nif ($text == \"\") {\n    echo \"Пожалуйста, введите текст для перевода.\";\n    exit;\n}\n\n// Получаем API-key и идентификатор каталога из файла config.php\nrequire_once 'config.php';\n\n// Формируем URL для запроса к API Яндекс.Переводчика\n$url = 'https://translate.api.cloud.yandex.net/translate/v2/translate';\n\n// Формируем заголовки для запроса\n$headers = [\n    'Content-Type: application/json',\n    \"Authorization: Api-Key $API_key\"\n];\n\n// Формируем данные для запроса\n$post_data = [\n    \"targetLanguageCode\" => $language,\n    \"texts\" => [$text],\n    \"folderId\" => $folder_id,\n];\n\n// Кодируем данные в формат JSON\n$data_json = json_encode($post_data);\n\n// Инициализируем cURL\n$curl = curl_init();\ncurl_setopt($curl, CURLOPT_HTTPHEADER, $headers);\ncurl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\ncurl_setopt($curl, CURLOPT_POSTFIELDS, $data_json);\ncurl_setopt($curl, CURLOPT_URL, $url);\ncurl_setopt($curl, CURLOPT_POST, true);\n\n// Выполняем запрос и получаем ответ\n$result = curl_exec($curl);\n\n// Закрываем cURL\ncurl_close($curl);\n\n// Декодируем ответ из формата JSON\n$result_json = json_decode($result, true);\n\n// Проверяем, что ответ содержит переведенный текст\nif (isset($result_json['translations'][0]['text'])) {\n    // Выводим переведенный текст на экран\n    echo \"<h1>Перевод</h1>\";\n    echo \"<p>\" . $result_json['translations'][0]['text'] . \"</p>\";\n} else {\n    // Выводим сообщение об ошибке\n    echo \"<h1>Ошибка</h1>\";\n    echo \"<p>\" . $result_json['message'] . \"</p>\";\n}\n?>\nВизуализация результата\nМожно ввести текст в окошко и получить перевод после нажатия на кнопку на новой странице\nРезультат перевода\nПланы на будущее\nсделать перевод после нажатия кнопки пробел или enter\nполучить результат перевода на экране ввода исходного текста\nдобавить окошко с обратным переводом на русский\nдобавить три окошка справа: текст на английском, перевод на русский, обратный перевод на английский\nСпасибо за внимание\" Следите за обновлениями!\nПробуйте что‑то своё! GPT поможет. \n \n ",
    "tags": [
        "gpt-4",
        "переводчик"
    ]
}
{
    "article_id": "727034",
    "article_name": "Ловим и исправляем «Internal Server Error» — apache2",
    "content": "Одна из самых популярных и при этом не всегда логирующаяся ошибка apache2 - \"Internal Server Error\". В этой статье разберу возможные причины и решения из интернета и личного опыта. Иногда эта ошибка весьма не очевидна.\nВсе ситуации описаны для операционной системы Ubuntu Linux 22.10.\nНу и, конечно, первое, что вы должны сделать это попробовать перезапустить службу.\nsudo systemctl restart apache2\nЕсли это не помогло, то двигаемся дальше.\n1. Конфигурация\n1.1. Ошибка конфигурации веб-приложения\nПрежде всего рекомендую сделать запрос к вашему сайту локально, прямо с сервера.\ncurl localhost:80\nЕсли вы не видите \"Internal Server Error\", а видите html страницу, то 99% проблема в файлах конфигурации и настройках доступа.\nПроверьте файл: /etc/apache2/sites-available/your_app.conf\nгде your_app.conf - название вашего файла конфирурации, либо стандартный conf файл - «000-default.conf»\nКак он выглядит:\n/etc/apache2/sites-available/your_app.conf\nСтрока «Require ip 127.0.0.1» говорит, о том, что разрешено подключение только с локального хоста.\nРешение: замените строку «Require ip 127.0.0.1» на «Require all granted»\nТак же «Require all granted» должна быть в /etc/apache2/apache2.conf\n/etc/apache2/apache2.conf\n1.2. Старый конфигурационный файл\nВозможно, создавая новый файл конфигурации веб-приложения он не был выбрал или включен.\nРешение:\n    1. Выключаем стандартный файл конфигурации\n    2. Включаем свой\n    3. Перезагружаем apache2\na2dissite 000-default.conf \na2ensite your_app.conf \nsystemctl restart apache2 \n2. Права доступа\nПроблема возникает тогда, когда права файлов вашего проекта не соответствуют ожидаемым.\n2.1. Владелец файлов\nФайлы вашего проекта не принадлежат пользователю www-data.\nПапка проекта (your_project) не принадлежит пользователю www-data\nРешение:\nsudo chown -R www-data:www-data your_project/\nP.S. Случается так, что apache2 при установке не создаёт пользователя www-data, в этом нет ничего страшного, можно обойтись и без его создания. Права отлично функционируют и сайт работает.\n2.2. Права файлов\nОшибка так же может возникать когда владелец установлен верно, но всё равно не имеет доступа к файлам из-за настроек прав доступа.\nРешение: \nsudo chmod -R 755 your_project/\n2.3. Веб-приложение работает с файлами системы\n\"Internal Server Error\" возникает, когда ваше веб-приложение взаимодействует с файлами системы у которых нет прав на исполнение. Звучит также странно как есть на самом деле, почему я не могу читать файлы у которых есть право на чтение? До сих пор не понимаю. Но проблема эта решается, если выдать файлам право на исполнение.\nРешение: \nsudo chmod -R 777 your_project/files/\n3. Ошибка в коде вашего веб-приложения\nТакже частая ситуация, когда apache2 настроен правильно, но всё равно возникает эта нелогирующаяся ошибка \"Internal Server Error\", тогда следует проследить отрабатывает ли вообще ваше приложение.\nНапример, если оно не может подключиться к базе данных, то вы, всё равно, увидите \"Internal Server Error\". Стоит проверить верный ли пароль и есть ли доступ к базе данных. А возможно, что просто веб-приложение запустилось раньше базы данных, в этом случае поможет простая перезагрузка apache2.\nЕсли ваше приложение взаимодействует с внешним ресурсом, и он оказывается не доступен или привышен лимит ожидания ответа, то вы снова увидите \"Internal Server Error\".\n4. Переустановка apache2\nЕсли вам не помогли все вышеуказаные действия, то возможно проблема с самим apache2, тогда нужно попробовать его переустановить:\nsudo apt update\nsudo apt install --reinstall apache2\nЕсли вы не решили свою проблему, то вот еще возможные причины и направления для дальнейшего поиска. \nОшибка синтаксиса .htaccess. Если вы используете Apache в качестве веб-сервера, то, скорее всего, у вас есть .htaccess файл в корневом каталоге вашего сайта. Неверный синтаксис или несуществующая директива модуля может привести к ошибке 500.\nПроблемы с плагинами и темами. Если вы используете WordPress или аналогичную CMS, ошибка 500 может появиться после обновления или изменения \tплагина или темы.\nПроблемы с сервером. Поврежденная файловая система или исчерпанная память могут привести к ошибке 500.\nМодули Node.js. Если у вас есть сайт на основе Node.js, обновление модулей может вызвать внутреннюю ошибку сервера 500.\nДовольно часто вредоносный код, внедряемый на ваш сайт, приводит к ошибке 500.\nНесовместимый модуль. Загрузка несовместимого модуля PHP или Apache вызывает ошибку 500.\nP.S. Надеюсь, кому-то помог. Удачи.\n \n ",
    "tags": [
        "apache2",
        "internal server error",
        "500 error",
        "apache error",
        "ошибка",
        "ошибка 500",
        "apache 500 error"
    ]
}
{
    "article_id": "728376",
    "article_name": "AMD Ryzen 6800u + amd-pstate: скромный отзыв после перехода с Intel",
    "content": "Так получилось, что мои отношения с AMD каждый раз не складывались и я снова и снова возвращался на Intel. Тоже самое чуть не случилось и в этот раз. Но, как говорится, упорство и труд все перетрут...\nЗабегая вперед, скажу, что linux kernel 5.17 привнес новый amd-pstate драйвер, как альтернативу ACPI CPUFreq. А также amdgpu видео драйвер. И это изменило все... В моем случае )\nИзначально, после покупки нового ноутбука, я был достаточно сильно расстроен тем, как постоянно работают вентиляторы на новом 6800u буквально на банальных задачах, с которыми мой старый ноутбук на процессоре 8250u справлялся практически не нагреваясь.\nЕще больше я был расстроен сравнением результатов тестов Geekbench на Windows 11 Pro и Fedora 37 (Workstation). Разница была колоссальная, 8200 баллов против 5300. Решение оказалось довольно банальное - установка видеокодеков:\nsudo dnf install gstreamer1-plugins-{bad-,good-,base} gstreamer1-plugin-openh264 --exclude=gstreamer1-plugins-bad-free-devel\nsudo dnf install lame* --exclude=lame-devel sudo dnf group upgrade --with-optional Multimedia\nsudo dnf -y install ffmpeg\nНо было в новом процессоре нечто очень раздражающее, это его гипер-возбужденное состояние, когда под малейшей задачей частоты и температуры моментально подскакивали. Этакий процессор-неврастеник... Решение на текущий момент нашел следующее:\nsudo cpupower frequency-set -g conservative\nПо поводу турбобуст все еще в сомнениях, нужно ли отключать:\nsudo sh -c \"echo 0 > /sys/devices/system/cpu/cpufreq/boost\"\nДалее, видеокарта. Мои задачи на линуксе не требуют производительной видеокарты, поэтому уменьшил производительность до минимума:\nsudo sh -c \"echo 'low' > /sys/class/drm/card*/device/power_dpm_force_performance_level\"\nЧто это дало? При просмотре видео на ютюбе температура не поднимается выше 40-42 градусов в качестве 720p. Батарея ноутбука стала разряжаться заметно медленнее, можно работать в режиме печатной машинки целый рабочий день. Производительность при этом все равно выше, чем у старого ноутбука.\nКонечно, мой пример не самый показательный. Возможно, вам захочется использовать новый процессор по максимуму. Но, по моим наблюдениям, как раз драйвер ACPI CPUFreq выжимает из процессора по максимуму, для этого можно не заморачиваться с amd-pstate.\nСкриншот текущего состояния системы, во время набора этого текста:\nТесты в Geekbench 6:\nAMD 6800u текущий режим с настройками выше\nAMD 6800u максимальная производительность\nIntel 8250u максимальная производительность (для сравнения)\nНу и напоследок, проверьте ваш текущий драйвер командой\ncpupower frequency-info\n показывает ли \ndriver: amd-pstate.\n Если нет, то сначала нужно проверить, скомпилировано ли ваше ядро с поддержкой нового драйвера и если да - то добавить в аргументы загрузки ядра следующее:\ninitcall_blacklist=acpi_cpufreq_init amd_pstate=passive\nВозможно, я написал выше какие то прописные истины, которые итак известны закоренелым AMDшникам, но будет полезен тем, кто только задумывается переходить на процессоры AMD новой архитектуры Zen3+.\n \n ",
    "tags": [
        "ryzen",
        "6800u",
        "amd-pstate",
        "linux",
        "zen3",
        "fedora 37"
    ]
}
{
    "article_id": "728972",
    "article_name": "Что изменилось в инструментах OpenStack? Рассказываем о самых важных обновлениях в релизе Antelope",
    "content": "\r\nВ марте 2023 года OpenStack начал новый цикл обновлений, выпустив \nAntelope\n — 27-ю версию облачного стека с открытым исходным кодом. Это первый выпуск в рамках \nSLURP\n, где пользователи могут перейти на годичный цикл обновлений и пропускать деплой каждые 6 месяцев.\n\r\n\n\r\nМы посмотрели release notes совместно с экспертами Selectel и выделили самые важные обновления. Под катом рассказываем, что изменилось в Nova, Neutron, Octavia и Cinder — именно эти компоненты мы используем в разработке собственного \nоблака\n. Сохраняйте статью в закладки: пригодится тем, кто работает с этой open source-платформой виртуализации или интересуется ею.\n\r\n\n\r\n\nИспользуйте навигацию, если не хотите читать текст полностью:\n\r\n\n\r\n→ \nNova\n\r\n→ \nNeutron\n\r\n→ \nOctavia\n\r\n→ \nCinder \n\r\n\n\r\n\nOpenStack \n— свободное программное обеспечение, которое используется для создания инфраструктурных облачных сервисов и облачных хранилищ. Selectel разрабатывает облачную платформу на базе OpenStack с 2013 года. Новую на тот момент платформу мы выбрали после неудачного опыта с самописным облаком на Haskell — подробнее уже \nписали об этом\n на Хабре. В итоге нам понравилось работать с OpenStack: было понятно, что менять, чтобы ничего не сломалось, также была ценна поддержка со стороны комьюнити и возможность кастомизировать патчи.\n\r\n\n\r\nВ подборке мы сконцентрировались на компонентах, с которыми сотрудники облачной платформы работают каждый день. Обновления по всем компонентам можно найти \nпо ссылке\n.\n\r\n\n\r\n\nNova\n\r\n\nКонтроллер вычислительных ресурсов, который передает команды множеству гипервизоров, запущенных на хостах, и управляет виртуальными машинами. С компонентом Nova в Selectel работает команда Compute — ребята, которые заботятся о правильном распределении и утилизации вычислительных мощностей облака.\n\r\n\n\r\n\nПользователи могут указывать FQDN в hostname.\n Ранее Nova не разрешала назначать FQDN в hostname и блокировала его, поэтому в качестве hostname использовалось отображаемое имя виртуальной машины. В Antelope пользователи смогут задавать hostname при создании новых серверов и изменять их после. \n\r\n\nАдминистраторы могут менять конечное состояние для эвакуации виртуальных машин.\n После эвакуации ВМ будет оставаться выключенной, пока пользователь не остановит ее сам. В релизе Antelope Nova конечный статус у ВМ будет SHUTOFF. Единственный способ сохранить состояние экземпляра после эвакуации — использовать более старую версию Nova.\n\r\n\nАдминистраторы могут могут сократить электропотребление ЦП.\n Эта опция применима тогда, когда у крупных операторов связи есть 2-4 ЦП, которые нельзя использоваться ввиду требований к пинингу ЦП на хост. Неиспользуемое ядро процессора потребляет 3-5 Вт и выделяет 3-5 Вт тепла, которое необходимо охладить сплит-системой ЦОДа или за счет окружающей среды. Для снижения энергопотребления и тепловыделения в libvirt можно изменять состояние питания CPU из интерфейса sysfs ядра. \n\r\n\n\r\nПодробнее → \nrelease notes Nova 2023.1\n\r\n\n\r\n\nNeutron\n\r\n\nСервис подключения к сети, который отвечает за сетевые подключения виртуальных машин, балансировщиков нагрузки и всех других сущностей с приватной или публичной связанностью. Мы используем Neutron для организации сетей облака и в сервисе бэкапов по расписанию.\n\r\n\n\r\n\nВ политике API добавлена поддержка работы с новыми ролями\n — project_member и project_reader.\n Как и большинство сервисов OpenStack, Neutron защищает свой API с помощью управления доступом на основе ролей: пользователи могут получить разрешение к различным API в зависимости от их роли в проекте. Теперь Neutron предоставляет три роли — admin, member и reader — в политике API по умолчанию. Безопасное управление доступом поддерживается как Neutron network, так и компонентами image management Glance (sRBAC).\n\r\n\nДобавлен API для очистки устаревших устройств драйвера dhcp. \nРанее в этом не было необходимости, поскольку при удалении namespace стиралось устройство. Теперь, в сетях с несколькими сегментами мы можем удалять устаревшие ID. Поиском таких «мертвых душ» и занимается API clean_devices.\n\r\n\nДобавлен OVN Agent, который реализует функционал, неподдерживаемый ovn-controller’ом. \nАгент работает на вычислительном узле или узле контроллера, используя OVN в качестве сетевого бэкенда, аналогично другим драйверам механизма ML2 — ML2/OVS или ML2/SRIOV. OVN Agent будет выполнять те действия, которые не может выполнить служба ovn-controller. \n\r\n\n\r\n\n\r\n\n\r\n\nДобавлен OVN Neutron Agent: поддержка QoS для для DevLink ports\n. Это расширение будет применять правила QoS — минимальной и максимальной пропускной способности на выходе — для портов с аппаратной разгрузкой. Расширение использует команды «ip-link» для установки параметров «ceil» и «rate» на соответствующих виртуальных функциях.\n\r\n\nДобавлена поддержка маршрутизируемых сетей для работы с несколькими сегментами на одном хосте.\n Главным следствием этого станет расширение оператором пула IP-адресов без создания нескольких сетей и/или увеличения широковещательного домена. На данный момент нынешняя поддержка доступна только для агента OVS.\n\r\n\nДля ML2/OVS и ML2/OVN добавлена поддержка моделирования туннелей в Placement API.\n Теперь параметр конфигурации «tunnelled_network_rp_name» (значение по умолчанию «rp_tunnelled») определяет имя поставщика ресурсов, используемое для представления всех туннелированных сетей на compute node (хосте виртуализации). Если эта строка присутствует в словаре «resource_provider_bandwidths», то соответствующий драйвер создаст поставщика ресурсов для оверлейного трафика.\n\r\n\n\r\nПодробнее → \nrelease notes Neutron 2023.1\n\r\n\n\r\n\nВозможно, эти тексты тоже вас заинтересуют:\n\r\n\n\r\n→ \nРеализация пользовательского интерфейса OpenStack LBaaS\n\r\n→ \nКак работают объектные хранилища: OpenStack Swift\n\r\n→ \nМожно ли сейчас продолжать развивать IT-инфраструктуру? Что изменилось после февраля 2022 года\n\r\n\nOctavia \n\r\n\nРешение для балансировки нагрузки с открытым исходным кодом. Собственно, на Octavia работают облачные балансировщики нагрузки в Selectel.\n\r\n\n\r\n\nДобавлен новый «cpu-pinning» элемент в скрипт \nдля\n сборки образа амфоры*, который улучшит вертикальное масштабирование.\n Когда собирается образ amphora с несколькими vCPU, то «cpu-pinning» настраивает ядро Linux на изоляцию всех виртуальных процессоров, кроме первого, чтобы они использовались исключительно потоками HAProxy. \n\r\n\n\r\n*Amphora — это отдельные виртуальные машины, контейнеры или серверы bare-metal, которые предоставляют услуги балансировки нагрузки в среды клиентских приложений.\n\r\n\n\r\nПодробнее → \nrelease notes Octavia 2023.1\n\r\n\n\r\n\nCinder\n\r\n\nВиртуальная система хранения данных, где ОС запускается преимущественно с сетевого или локального диска, как у обычного компьютера. Cinder участвует в работе облачных бэкапов по расписанию.\n\r\n\n\r\n\nРасширили поддержку новых оборудований.\n Теперь \nCinder\n предоставляет серверные драйверы для HP XP iSCSI и FC, Fungible NVMe-TCP и NetApp NVMe-TCP.\n\r\n\n\r\nПодробнее → \nrelease notes Cinder 2023.1\n\r\n\n\r\n\n\r\n\nСергей Крайнев\n, разработчик облачной платформы Selectel\n\r\n\n\r\n\nУ OpenStack есть интересные нововведения с полезным функционалом для создания и поддержания облачной платформы. Однако перед использованием советуем протестировать их с учетом ваших требований, так как некоторые фичи могут не подходить конкретному пользователю.\n\r\n\nЧто вы думаете по поводу релиза Antelope? Поделитесь своим мнением в комментариях.\n \n ",
    "tags": [
        "selectel",
        "openstack",
        "cloud",
        "облачная платформа",
        "nova",
        "neutron",
        "octavia",
        "cinder"
    ]
}
{
    "article_id": "713792",
    "article_name": "Дешевый как автобус, удобный как такси: перспективный вид общественного транспорта для больших и средних городов. Часть1",
    "content": "\r\n(\nJean-Claude Mézières\n)\n\r\n\n\r\n\n1. О чем этот цикл статей\n \n\r\n\n\r\n\n1.1 Центральный результат\n\r\nЕсли я только не допустил критической ошибки, то мне удалось обнаружить удивительную по своим характеристикам схему пассажирских перевозок. Представьте себе такую картину: вы находитесь в большом городе и вам нужно добраться из точки A в точку B. Все, что от вас требуется — это дойти до ближайшего перекрестка и на вашем смартфоне или установленном там специальном терминале указать точку назначения. Через несколько минут к вам подъедет небольшой, но просторный автобус. Автобус, в который можно войти, не пригибаясь, внести с собой детскую коляску, велосипед или даже виолончель, в котором всегда можно сесть и вытянуть ноги. Этот автобус довезет и высадит вас на ближайшем от точки B перекрестке. Вы доберетесь туда без каких-либо пересадок, а все путешествие, включая ожидание на остановке, займет всего на 25-50% времени больше, чем если бы совершили его на личном автомобиле. По моим оценкам в условиях современных мегаполисов такой вид транспорта будет достаточно массовым, чтобы цена одной поездки на нем была близка к стоимости билета на обычный городской автобус. \n\r\n \n\r\nНа удивление, рассуждения, которыми я пришел к этим результатам, опираются на сравнительно простую математику и, наверное, даже какой-нибудь талантливый старшеклассник при удачном стечении обстоятельств сумел бы догадаться до них сам. Прикладная значимость темы и не высокие требования к уровню математики, побудили меня постараться написать статью так, чтобы читатель смог пройти тропой открытий, познакомиться с некоторыми исследовательскими приемами и получить удачный пример, на котором он бы смог объяснить своим детям, для чего нужна математика и как ее можно применять в повседневной жизни. \n\r\n \n\r\n\n1.2 Изначальная задача\n\r\nЗабавна сама история того, как я взялся за это исследование и то, как я обнаружил самый ценный его результат. Позвольте мне об этом вкратце рассказать. Настоящая статья — не первая моя работа в области проблем городского транспорта: я уже публиковал две или три — смотря как считать. Иногда по их темам ко мне обращаются студенты и разной руки предприниматели. Примерно полгода назад мне поступил звонок от одного очень амбициозного молодого человека. Он спросил, не могу ли я ему помочь придумать способ, чтобы простым (и не очень) людям стало проще быстрее и удобнее добираться до работы и возвращаться оттуда домой. Его исходная идея была в том, что работников можно развозить чем-то вроде школьного автобуса и на этой основе создать новый более удобный вид общественного транспорта. Идея, как вы понимаете, была довольно грандиозной и звучала заманчиво, однако в тот момент я работал на своей книгой и мне хотелось избежать серьезной увлеченности какой-либо другой задачей. Все же я не мог совсем отказать и предложил этому молодому человеку свою помощь в том, чтобы формализовать его задачу и подыскать тех, кто был бы в состоянии ее решить. Правда, как это часто случается с предпринимателями (в чем я их нисколько не виню — сам был таким), автор этой замечательной идеи из общения куда-то пропал. Да… автор-то, может быть, и пропал, только вот его идея на тот момент уже овладела моими мыслями и, отложив все дела, я принялся ее изучать. \n\r\n \n\r\nДовольно быстро я нашел неплохое решение — совместное такси с одной пересадкой, ему посвящена одна из глав этой работы. Тогда я был почти уверен, что лучшего решения у задачи нет и пытался это строго доказать. Вот только доказательство у меня все никак не получалось. В конце концов я был вынужден поставить под сомнение гипотезу о “невозможности” и попытался построить для нее гипотетический “контрпример”. Каково же было мое удивление, когда такой контрпример действительно взял и построился. \n\r\n \n\r\nВ этом цикле я собираюсь опубликовать 3 статьи: текущая — «Предварительный анализ», следующая — «Эксперименты на торе», последняя — «Практически значимые решения». Их содержание является скорее не описанием какого-то одного конкретного результата, а журналом шагов его направленного поиска. Выбирая такой способ повествования, я хотел, чтобы каждый следующий шаг был для читателя почти очевиден, а финальный результат не казался чем-то удивительным.\n\r\n\n\r\nЧтение статьи займет у вас какое-то продолжительное время. Если формулы отображаются неправильно, попробуйте несколько раз перезагрузить страницу.\n\r\n\n\r\n\n2. Модель города и модель внутригородских суточных миграции\n \n\r\n\n \n\r\n\n2.1 Идеализация как исследовательский метод\n\r\nВ этой статье нас будут занимать только такие проблемы различных видов общественного транспорта, которые возникают в них из-за ограничений физического или математического характера и поэтому в принципе не могут быть устранены. Преодолимые проблемы, причиной которых являются инженерные ошибки, несовершенство общественного уклада, незнание или недомыслие — оставим специалистам других областей. Лучший способ увидеть, какие из проблем той или иной схемы пассажирских перевозок являются для нее непреодолимыми — это посмотреть на ее работу в условиях идеального воображаемого города. Если некоторый вид общественного транспорта в идеализированных условиях имеет какие-то недостатки, то, понятное дело, в реальных условиях они никуда от него не денутся. \n\r\n \n\r\n\n2.2 Идеальный клеточный город\n \n\r\nПредположим, что перед вами стоит задача спроектировать новый город с удобной транспортной системой. Вы не сделаете большой ошибки, если выберете для него клеточную, или как ее чаще называют — манхэттенскую планировку улиц. В идеальной манхэттенской планировке уличные дороги образуют правильную ортогональную сеть, разбивая город на одинаковые по форме и размеру кварталы. В одной из моих прошлых работ я показывал, что городах с манхэттенской планировкой все уличное движение можно перевести в режим зеленых волн (\nссылка\n). Если город находится в этом режиме, то любой водитель, который поддерживает рекомендованную скорость и движется только вперед, сможет добраться до конца улицы, постояв на светофоре самое большее один раз. В другой моей работе вы найдете доводы, что из всех пока что встречающихся планировок, клеточная наименее всего способствует образованию пробок. Эти замечания должны объяснить читателю, почему в качестве идеализированных я рассматриваю именно клеточные города. \n\r\n \n\r\n\n\r\n \n\r\nОсновной нашей моделью будет прямоугольный клеточный город с квадратными полукилометровыми кварталами и двусторонним уличным движением. Длина квартала в полкилометра выбрана не случайно — при меньших длинах трудно организовать зеленые волны, а при большей — слишком большими становятся расстояния, которые нужно проходить пешком. Альтернативная модель — это клеточный город с чередующимся односторонним движением и квадратными кварталами по 250 метров. Она будет фигурировать главным образом в упражнениях. В плане оптимальности обе модели по большому счету эквивалентны друг другу. В последних главах величина и соотношение сторон кварталов вообще не имеют значения, если только эти кварталы не слишком велики. \n\r\n \n\r\nЕще одно упрощение, к которому я вскоре прибегну — это сворачивание плоского прямоугольного города в правильный тор. Дело в том, что у прямоугольника есть край и это делает положения точек на нем не равнозначными: какие-то точки расположены ближе к центу, а какие-то — к периферии. Из-за этой неоднородности рассуждения наполняются оговорками, а вычисления становятся излишне технически сложными. У тора нет края и все его точки находятся в абсолютно равных условиях. Так же, как и на сфере, подходящим “вращением” любую точку тора можно наложить (перевести) в любую другую его точку. Общественный транспорт в тороидальном клеточном городе во всем, что не касается особого поведения у края, встречается ровно с теми же проблемами, что и общественный транспорт в обычном “плоском” городе. Что еще более важно, эти проблемы в обоих случаях имеют похожие решения. Для тех читателей, которым понятие (плоского) тора в новинку, я добавил в статью две ознакомительных главы. \n\r\n \n\r\n\n2.3 Миграционная модель. Город с равномерным доступом\n \n\r\nСколько-нибудь детальный анализ пассажирского городского транспорта вряд ли возможен, если вы не знаете о том, как, куда и насколько часто жители этого города совершают свои поездки. В этой статье мы будем придерживаться следующих наиболее простых предположений: \n\r\n1) за одно и тоже время внутри любого квартала желание совершить путешествие в другую точку города возникает у примерно одно и того же числа людей. \n\r\n2) для случайно выбранного путешествия независимо от его начальной точки, его точкой назначения с равной вероятностью будет служит любая другая точка города (вероятность точке стать концом путешествия равномерно распределена по всему городу). \n\r\n\n\r\nТакую миграционную модель условимся называть “городом с равномерным доступом”. \n\r\n \n\r\nБезусловно, наша миграционная модель является чисто академической, полученные на ее основе результаты — оценочными. В настоящем городе миграция людей может быть подчинены совсем другим законам, поэтому внедрение какой-либо из описанных в этой статье транспортных схем должны предшествовать тщательные полевые измерения, а сама схема к результатам этих измерений правильным образом адаптирована. \n\r\n — \n\r\n \n\r\n\n3. Неустранимы недостатки некоторых традиционных видов общественного транспорта\n \n\r\n\n \n\r\nПрежде чем пытаться создать новые виды общественного транспорта, попытаемся разобраться в преимуществах и недостатках уже существующих. \n\r\n \n\r\n\n3.1 Простой городской автобус\n\r\nПод простым автобусом мы будем понимать схему работы не только обычных городских автобусов, а будем относить сюда еще и такие виды транспорта как троллейбус или трамвай. Все это — наиболее консервативные виды массового транспорта и их работа подчиняется одному и тому же принципу: некоторое множество транспортных средств с достаточно вместительными салонами движутся по заранее намеченным маршрутам от остановки к остановке и на каждой из них подбирают или высаживают какое-то количество своих пассажиров. \n\r\n \n\r\nПусть у нас имеется клеточный город с полукилометровыми кварталами и двусторонним движением. Очевидный способ создать в нем сеть маршрутов простого автобуса — это запустить по каждой его улице свой маршрут так, чтобы автобусы следовали по нему в обе стороны из края в край с интервалом в несколько минут. Что касается остановок, то их разумнее всего расположить на перекрестках: по одной для каждого из четырех направлений. Такое размещение остановок делает пересадку с одного направления на другое особенно быстрым. Описанную только что транспортную сеть в узком смысле мы и будем называть простым автобусом. \n\r\n \n\r\n\n\r\n\nрис 2\n\r\n \n\r\nКак вид транспорта простой автобус имеет немало приятных свойств: \n\r\n1) простая логика построения маршрута; \n\r\n2) от любой остановки до любой другой доехать можно всего с 1-ной пересадкой; \n\r\n3) если вы уже находитесь на улице, то остановка в любом из направлений расположена от вас не далее, чем в половине длины квартала. \n\r\n4) из наблюдений уже в небольших по населению городах среднее число пассажиров в салоне простых автобусов оказывается достаточно большим, чтобы сделать поездку на них относительно дешевой. \n\r\n \n\r\nОднако у простого автобуса при всех перечисленных его достоинствах имеется один очень существенный недостаток: даже в теории он, ну просто, о-о-очень медленный и, похоже, исправить это никак нельзя. Следующие рассуждения показывают почему. \n\r\n \n\r\nПусть максимальная разрешенная скорость движения в городе равна стандартным 60 километрам в час (\n метров в секунду или \n километр в минуту). Отъезжая от предыдущей остановки, автобус не может развить максимальную скорость мгновенно, точно также он не может мгновенно остановиться перед следующей — в обоих случаях ему понадобится некоторое время двигаться с ускорением. Таким образом путь автобуса между соседними остановками можно разделить на три участка: участок ускорения, участок торможения и средний участок, который автобус проезжает с постоянной максимально разрешенной скоростью. \n\r\n \n\r\nГугл говорит, что комфортным для пассажиров является ускорение, при котором за секунду автобус увеличивает (или уменьшает) свою скорость на \n м/с. Примем для расчётов, что ускорение автобуса на участках разгона и торможения постоянно и равно \nм/с за секунду. При таких вводных автобусу потребуется \n секунд, чтобы набрать полную скорость и столько же, чтобы сбросить ее до нуля. Постоянство ускорения автобуса во время разгона и торможения означает, что графики зависимости его скорости от времени в эти периоды будут наклонными прямыми линиями. Вычисляя площадь под этими графиками, мы находим, что участок разгона и участок торможения имеют длину \n метра, в месте \n метров. Расстояние между соседними остановками мы приняли равным длине квартала, то есть \n метрам. Отсюда следует, что средний участок, на котором автобус имеет максимальную скорость, в длину равен \n метрам и будет преодолён им за \n секунд. В итоге мы получаем, что весь полукилометровый путь от остановки к остановке автобус проедет в лучшем случае за \n секунд. Даже если бы простой автобус не задерживался на самих остановках, его средняя скорость не превысила бы \n м/с. \n\r\n \n\r\n\n\r\n\nрис 3\n\r\n \n\r\nТеперь оценим, какой будет средняя скорость автобуса с учетом длительности его остановок. Разные источники говорят, что среднее время посадки или высадки одного пассажира находится в пределах \n секунд. Возьмем за оценку \n. Пусть на каждой остановке входят и выходят в среднем \n человека, тогда процесс посадки-высадки в среднем потребует примерно \n-ти секундной стоянки, а средняя скорость окажется не больше \n м/с. Получается, что уже находясь внутри простого автобуса, вы будете перемещаться по городу в среднем более чем в два раза медленнее по сравнению личным автомобилем или персональным такси. \n\r\n \n\r\n\nУпражнение: \nесли вы ознакомились со статьей, посвященной зеленым волнам, покажите, что работу автобусов можно встроить в график зеленых волн так, что они будут проезжать все перекрестки без какого-либо ожидания, однако это возможно лишь в том случае, если средняя скорость движения автобусов нацело делит скорость распространения зеленых волн. \n\r\n \n\r\n\n3.2 Автобусная сеть, которая включает в себя простые и транзитные маршруты\n\r\nМожно ли сделать городские автобусы быстрее? Чтобы ответить на этот вопрос, давайте распишем, из чего складывается время путешествия автобуса между двумя достаточно удаленными точками \n и \n его маршрута. \n\r\n \n\r\n\n\r\n\nрис 4\n\r\n \n\r\nКак видно из рисунка 4 выше это время можно представить как сумму трех слагаемых: \n\r\n \n\r\n\n — это слагаемое равно времени, которое ушло бы на то, чтобы проехать путь между \n и \n с максимально разрешенной скоростью \n. \n\r\n\n “число остановок между \n и \n” \n “время однократного разгона/торможения”. Каждая остановка автобуса требует от него сначала торможения, в сумме они приводят к потере примерно \n-ти секунд; \n\r\n\n “число пассажиров, которые между \n и \n вошли или вышли из автобуса” \n “штраф посадки/высадки одного пассажира”. \n\r\n \n\r\nВ этих обозначениях средняя скорость автобуса на участке \n-\n будет даваться выражением: \n\r\n \n\r\n\n\r\n \n\r\nЕсли мы хотим, чтобы \n была как можно выше, то должны сделать так, чтобы значения слагаемых \n, \n и \n стали как можно меньше. \n\r\n \n\r\nНа слагаемое \n мы повлиять никак не можем: отрезок \n и максимальная разрешенная скорость \n — такие, какие они есть. \n\r\n \n\r\nВторое слагаемое \n получается произведением штрафа однократного разгона/торможения на число остановок, которое сделает автобус между точками \n и \n. Поскольку максимально разрешенное ускорение является заданной величиной, однократный штраф разгона/торможения мы поменять не можем. Зато, можем уменьшить число остановок между точками \n и \n, если расставим их пореже. \n\r\n \n\r\nТретье слагаемое \n получается произведением времени посадки/высадки одного пассажира, величина которого есть константа на суммарное число людей, которые вошли или покинули автобус на участке \n. Среднее число людей, которые входят или покидают автобусы маршрута \n за единицу времени на остановках между \n и \n, почти никак не зависит от того, на какой дистанции расставлены эти остановки. Действительно, если альтернативного транспорта нет, то всем, кому надо уехать из \n маршрутом \n, в конце концов сядут на свой автобус будь там хоть \n остановок, хоть \n. То же самое верно и для тех, кто этим маршрутом в \n собирается приехать. \n\r\n \n\r\nПусть из участка \n маршрутом \n в среднем уезжает \n человек в минуту, а приезжает — \n человек в минуту. Если интервал движения автобусов маршрута \n равен \n минут, то на участке \n в каждый из них войдет и выйдет в среднем \n пассажиров (докажите!). Уменьшая интервал \n, мы можем уменьшить и время, которое автобусу придется потратить на посадку/высадку своих пассажиров между точками \n и \n. \n\r\n \n\r\nИ так, если мы хотим увеличить среднюю скорость автобусов на маршруте \n, то интервал между ними нужно сделать как можно меньше, а дистанцию между остановками — как можно больше. Однако, здесь нас ждут логичные ограничения. Уменьшение во сколько-то раз временного интервала между автобусами, во столько же раз уменьшает и среднее число пассажиров в их салоне, а значит увеличивает себестоимость поездки для каждого отдельного пассажира. В свою очередь увеличение во сколь-то раз расстояния между соседними остановками, во столько же раз увеличивает среднюю длину пешего пути, который придется преодолеть пассажиру, чтобы сесть на нужный ему автобус, или, чтобы добраться до финальной точки своего путешествия от того места, где он с автобуса сойдет. Средняя длина пешего пути в одном путешествии по порядку величины равна расстоянию между остановками, поэтому просто так последнее нельзя сделать чересчур большим. \n\r\n\n\r\n\n\r\n\nрис 5\n\r\n\n\r\nОт проблемы, что цена поездок растет при уменьшении интервала движения автобусов, избавится, по всей видимости, нельзя, а вот для проблемы редко расставленных остановок — напротив есть довольно очевидное и простое решение. Это решение заключается в том, чтобы на каждой улице иметь два дублирующих друг друга автобусных маршрута: один с часто расположенными остановками и как следствие “медленный”, а другой — с остановками, расположенными на большом удалении друга от друга, и поэтому потенциально достаточно “быстрый”. Медленные маршруты и курсирующие по ним автобусы мы будем называть локальными, быстрые — транзитными. Естественно потребовать, чтобы остановки локальных автобусов были расставлены на всех перекрестках по маршруту следования, а вот транзитные автобусы останавливались только на каждом \n-том перекрестке вдоль их пути (рисунок 6). \n\r\n \n\r\n\n\r\n\nрис 6\n\r\n \n\r\nПусть в городе действуют локальные и транзитные автобусные маршруты как на рисунке выше. Подумаем тогда, какие действия должен совершить путешественник, чтобы добраться из точки \n в достаточно удаленную от нее точку \n? \n\r\n \n\r\nЕсли обе точки лежат на на одной улице и не занимают какого-то особого положения, то достаточно быстрый способ попасть из \n в \n будет таким: \n\r\nСперва от точки \n нужно дойти до ближайшего к ней перекрестка \n и сесть там на локальный автобус в сторону ближайшей остановки \n, на которой останавливаются транзитные автобусы. Доехав до \n выйти и пересесть уже на транзитный автобус, который направляется в сторону точки \n. На этом втором автобусе следует ехать до той его остановки \n, которая ближе всех остальных расположена к точке \n. В общем случае \n не является ближайшим к \n перекрестком, поэтому придется еще раз сесть на локальный автобус в сторону точки \n и выйти на ближайшем к ней перекрестке \n. Оставшийся путь следует проделать пешком. \n\r\n \n\r\nСхематично алгоритм такого путешествия можно описать как “л->т->л”. \n\r\n \n\r\n\nУпражнение: \nявляется ли описанный выше алгоритм наибыстрейшим по средней длительности путешествия между случайными точками \n и \n. Если нет, то как его нужно изменить, чтобы он таковым стал? Какую информацию о положении путешественника и автобусов использует ваше решение? \n\r\n\n\r\n\n\r\n\nрис 7\n\r\n \n\r\nВ общем случае, когда \n и \n не лежат на одной улице и не занимают на них какого-то особого положения, путешествие из A в B может быть выполнено по схеме: “л->т->л->л->т->л” (рисунок 7). Как вы видите, сценарий путешествия выходит не самым простым и включает в себя целых 5 пересадок. В действительности, если немного подумать и расположить остановки транзитных автобусов немного иначе (рисунок ниже), то максимально количество пересадок, которое потребуется от пассажира, можно сократить до 4-рех. \n\r\n \n\r\n\n\r\n\nрис 8\n\r\n \n\r\nВсякую сеть автобусных маршрутов, выполненную по образцу рисунка 8 мы будем называть “(городским) автобусом с транзитными маршрутами”. \n\r\n \n\r\n\nУпражнение:\n найдите все возможные схемы путешествия на автобусе с транзитными маршрутами между точками общего (не особого) положения. Попробуйте описать и классифицировать все особые случаи, вроде путешествия вдоль одной улицы, или от точки рядом с остановкой транзитного автобуса. \n\r\n \n\r\nДавайте хотя бы грубо оценим, каким должно быть \n, чтобы средняя скорость транзитных автобусов стала близкой к стандартным \n километрам в час (к \n км/мин). \n\r\n \n\r\nНа перегоне между соседними остановками транзитный автобус имеет один участок разгона и один торможения. Как мы посчитали выше, на этих участках он теряет в сумме \n секунд. Пусть при каждой остановке транзитный автобус подбирает и высаживает x человек, тогда время стоянки \n секунд. Если остановки этого автобуса расположены на каждом \n-том перекрестке, а длина кварталов равна половине километра, то \n. Из всего сказанного следует, что формулу средней скорости автобуса можно записать как: \n\r\n \n\r\n\n\r\n \n\r\nБлизкой к максимальной средняя скорость транзитного автобуса будет только в том случае, если: \n\r\n \n\r\n\n\r\n \n\r\nСледовательно мы можем воспользоваться приближением: \n\r\n \n\r\n\n\r\n \n\r\nи переписать \n как \n\r\n \n\r\n\n. \n\r\n \n\r\nПоследняя формула показывает, что нет особого смысла время посадки-высадки пассажиров \n пытаться сделать сильно меньше, чем штраф разгона/торможения \n — все равно средняя скорость автобуса от этого сильно уже не увеличится. Для простоты будем считать интервал между транзитными автобусами подобранным так, что \n секунд. Такая величина \n соответствует примерно \n вошедшим и вышедшим пассажирам на каждой остановке. Подставляя \n сек, \n сек в \n получаем неравенство на \n: \n\r\n \n\r\n\n или \n\r\n \n\r\n\n.\n\r\n \n\r\nЕсли мы хотим, например, чтобы транзитные автобусы двигались со средней скоростью не меньше \n км/ч (\n от \n), то \n должно быть равным по крайней мере \n, то есть между соседними остановками транзитного автобуса должно быть порядка \n километров. Эта оценка позволяет указать минимальный размер города, в котором автобусы с транзитными маршрутами вообще имеют смысл: что-то около \n транзитных перегонов или \n км в длину. Квадратный город таких размеров при стандартной плотности в \n жителей на квадратный километр будет иметь население примерно в \n тысяч человек. \n\r\n \n\r\nПо моим беглым оценкам, в городах размером \nкм (населением \n миллионов человек) большая часть маршрута типичных путешествий будет преодолеваться именно за счет транзитных автобусов, а среднюю скорость таких путешествий реально приблизить к \n ( \nм/с или \nкм/ч). Казалось бы, вот он — идеальный транспорт мегаполисов, но 4 пересадки — это все-таки не то, с чего бы я мечтал начинать свой день! \n\r\n \n\r\n\nУпражнение:\n подумайте, имеется ли возможность вместо транзитных автобусов с той же целью использовать подземное метро. С какими преимуществами и недостатками сопряжены обнаруженные вами решения? Попытайтесь сделать численные оценки. \n\r\n \n\r\n\n3.3 Персональное такси\n\r\nБыстро, часто очень удобно, но при этом очень дорого. Занимает много места на дороге, выделяет много выхлопных газов в расчёте на \n пассажиро-километр.\n\r\n — \n\r\n \n\r\n\n\r\n\n4. Такси для совместных поездок между парами городских районов\n \n\r\n\n \n\r\n\n4.1 Идея совместных поездок. \n\r\nПерсональное таки — это, пожалуй, самый быстрый вид городского транспорта, но, без сомнения, и самый дорогой: зачастую пассажир всего один, а везет его целый автомобиль еще и с нанятым водителем. Отсюда очевидна и идея, как сделать поездки на такси дешевле: достаточно придумать способ, который бы позволил машине такси перевозить несколько пассажиров разом. Если такой способ будет найден и внедрен, то стоимость каждого километра пути, пройденного автомобилем такси, может быть поделена между всеми пассажирами, которые в это время находились в его салоне. Чем больше среднее число пассажиров в салоне, тем дешевле должна стоит поездка для каждого из них. \n\r\n \n\r\nОднако у идеи совместных поездок есть и очевидное препятствие: если машина совместного такси будет подбирать каждого, кто голосует перед ней на дороге, то в ее салоне могут оказаться люди, которым совсем не по пути. Чтобы развезти таких пассажиров по их их пунктам назначения, придется кататься из одного конца города в другой, впустую расходуя свое рабочее время и время своих клиентов. \n\r\n\n\r\n\n\r\n\nрис 9\n\r\n \n\r\nОчевидный способ бороться с проблемой не подходящих друг к другу попутчиков состоит в том, чтобы всякий раз пытаться заполнить машину такси такими пассажирами, для которых будут близки как точки их посадки, так и точки высадки. Ниже подробно рассматривается одна из схем совместного такси, которая реализует эту идею. \n\r\n \n\r\n\n4.2 Регламент работы\n\r\nПусть у нас есть клеточный город размера \n. Вертикальными и горизонтальными прямыми разобьем его на решетку одинаковых по размеру квадратных клеток \n. Идея разделения на клетки состоит в том, чтобы попутчиками могли становиться только те люди, которые из одной и той же клетки направляются в одну и ту же другую. Для простоты можно даже считать, что перевозкой пассажиров между каждой конкретной парой клеток занимается свой отдельный небольшой парк машин, а посадка и высадка пассажиров производят только на перекрестках. \n\r\n \n\r\nКогда мы имеем дело с персональным такси или личным транспортом, то каждая поездка от перекрестка к перекрестку может быть выполнена по кратчайшему г-образному маршруту со средней скоростью близкой к максимально разрешенной в городе. За возможность перевозить по несколько клиентов сразу машине совместного такси, вообще говоря, придется заплатить удлинением и усложнением маршрута внутри стартового и финишного квадратов. Конечно, существуют ситуации, когда совместная поездка по быстроте почти не уступает поездке на персональном такси. Например, если у группы попутчиков точки посадки все расположены вдоль одной улицы, точки высадки также все расположены вдоль одной (возможно, другой) улицы, то маршрут совместной поездки для них можно проложить так, чтобы каждый из попутчиков был доставлен в точку своего назначения по наикратчайшему для себя маршруту. \n\r\n \n\r\nОднако, описанная только что ситуация — это скорее исключение, чем правило. В общем случае места посадки и места высадки путешествующих вместе пассажиров будут хаотично разбросаны внутри стартового и финишного квадратов. Чтобы их сначала собрать, а затем развести, машине такси придется двигаться извилистым маршрутом, сбрасывать скорость на поворотах и проезжать лишние мили. Из-за всего этого путешествие на совместном такси, очевидно, будет длиться в среднем дольше, чем то же путешествие на такси персональном. Рисунок 10 показывает, что довольно типичной является ситуация, когда даже двух клиентов нельзя совместно перевезти так, чтобы не увеличить длину путешествия по крайней мере для одного из них. Давайте попробуем оценить, на сколько в среднем совместное межклеточное такси медленнее персонального или личного автомобиля. \n\r\n \n\r\n\n\r\n\nрис 10\n\r\n \n\r\n\nЛемма о маршрутах машин межклеточного такси:\n \n\r\nПредположим, что имеются n путешественников, которых нужно собрать в “стартовом” квадрате \n и развести по точкам их назначения в “финишном” квадрате \n, причем машина такси, которая должна это сделать, уже находится в \n. Для любого маршрута \n, который решает задачу совместной перевозки путешественников, существует такой маршрут \n, что: \n\r\n1) маршрут \n также решает задачу перевозки этих путешественников; \n\r\n2) маршрут \n задает тот же самый порядок посадки и высадки путешественников, что и \n, но при этом является одним из самых коротких среди маршрутов с таким порядком; \n\r\n3) при использовании машиной такси маршрута \n длина поездки каждого ее пассажира оказывается такой же или короче, чем при использовании маршрута \n; \n\r\n4) весь маршрут \n можно разделить на три непрерывных участка: начальный, средний и конечный, так, что начальный участок будет целиком лежать в \n, конечный — целиком лежать в \n, а средний — являться кратчайшей ступенчатой кривой между концом начального участка и началом конечного. \n\r\n5) если квадраты \n и \n не находятся друг с другом на одной горизонтали или на одной вертикали, то маршрут \n можно выбрать так, чтобы его средний участок представлял из себя \n-образную кратчайшую, проведенную между ближайшими друг к другу (угловыми) перекрестками квадратов \n и \n. \n\r\n \n\r\n\n\r\n\nрис 11\n\r\n \n\r\nДоказательство. \n\r\nИдея доказательства 1)-4) состоит в том, чтобы каждый участок \n между двумя остановками машины такси (точками посадки или высадки пассажиров) заменить \n-образной кратчайшей. Теперь что касается 5). Последовательными вращениями карты на \n градусов добьемся, чтобы квадрат \n был строго выше и строго правее \n. Пусть \n — это построенный по \n маршрут из \n-образных кратчайших, о котором мы говорили выше. Одним из звеньев маршрута \n является \n-образная кратчайшая \n между последней точкой \n посадки клиентов в клетке \n и первой точкой \n высадки клиентов в клетке \n. Заменим в \n участок \n на ломаную \n, проведенную согласно правилу: по \n-образной (возможно, вырожденной в отрезок или даже в точку) кратчайшей от \n до самого верхнего правого перекрестка в \n, затем по \n-образной (возможно, вырожденной) кратчайшей в самый нижний левый перекресток в \n, и наконец оттуда снова по по \n-образной (возможно, вырожденной) кратчайшей в точку \n. Легко видеть, что \\gamma тоже кратчайшая между \n и \n, а получившийся после замены \n на \n маршрут \n удовлетворяет каждому из пунктов 1)-5). \n\r\n \n\r\n\n4.3 Алгоритм обхода\n\r\nПусть \n и \n — это две произвольные клетки, выбранные из разных строк и разных столбцов решетки \n. Последовательными поворотами карты на \n градусов добьемся того, чтобы клетка \n оказалась строго выше и правее \n. Самый верхний правый перекресток в \n обозначим как \n, в то время как самый нижний левый в \n — как \n. Лемма о маршрутах позволяет считать, что все машины такси, курсирующие между \n и \n, покидая \n, проезжают через перекресток \n, а прибывая в \n, проезжают через перекресток \n. \n\r\n \n\r\nПредставим теперь, что в указанной нами точке \n клетки \n появилась пустая машина, которая должна выполнить рейс между \n и \n и прибыть затем в указанную нами точку \n клетки \n. Будущие пассажиры этой машины, пусть их число равно n, случайным образом разбросаны по всем перекресткам внутри \n. Какого алгоритма обхода должна придерживаться машина такси, чтобы их всех подобрать? Аналогично, какого алгоритма она должна придерживаться, чтобы развести всех этих пассажиров по пунктам их назначения после того, как она достигнет клетки \n. Понятно, что оба этих алгоритма должны по возможности минимизировать путь машины внутри клеток \n и \n. Отыскать оптимальный алгоритм обхода мне не удалось (быть, может вы придумаете, как это сделать), но построить приемлемое решение не так уж сложно. \n\r\n \n\r\nЧтобы упростить расчёты и рассуждения, предположим, что длина \n квадратов \n, на которые поделен город, много больше длины кварталов. Если это предположение верно, то через каждый клетку \n пройдет сразу много как горизонтальных, так и вертикальных улиц, причем по сравнению с размером клетки расстояние между соседними улицами будет мало. Последнее позволяет приближенно считать, что горизонтальная и вертикальная дороги проходят через каждую точку клетки \n и каждая такая точка может быт местом посадки или высадки пассажиров такси. Еще одним следствием такого упрощения станет то, что перекресток \n будет находиться в самом правом верхнем углу \n, а перекресток \n — в самом нижнем левом углу \n. \n\r\n \n\r\nНачнем с оценки асимптотики. Пусть число попутчиков n является квадратом целого числа. Расставим этих людей так, чтобы они заняли положение узлов правильной квадратной решетки с размером ячейки \n. Изображенная на рисунке “змейка” обходит все точки решетки и заканчиваются в верхнем правом углу в точке \n, ее длина равна \n. Не трудно сообразить, что эта змейка является одним из кратчайших маршрутов обхода точек положения наших воображаемых путешественников. Действительно, какой бы маршрут не выбрала машина таки, самое малое расстояние, которое ей придется проехать между точкой посадки каждого предыдущего и каждого последующего пассажира равно \n, всего таких “перегонов” будет \n, поэтому весь обход в длину будет не меньше чем \n. \n\r\n \n\r\n\n\r\n\nрис 12\n\r\n \n\r\nПостроим теперь решение для общего случая, когда начальные положения n путешественников расположены внутри \n хаотическое. С этой целью поделим клетку \n на \n одинаковых полос. Суть алгоритма обхода состоит в том, чтобы объехать все эти полосы змейкой, начиная с самой левой, и подбирать пассажиров только внутри текущей полосы. Установим правило, что находясь внутри полосы, машина должна двигаться строго вдоль ее центральной линии до тех пор, пока очередной путешественник, которого она должна подобрать, не окажется от нее точно справа или слева. Всякий раз когда это будет случаться, таксист должен свернуть вбок, подобрать этого путешественника и тем же путем вернуться на среднюю линию текущей полосы. Если движение такси будет следовать такому регламенту, то длина той ее части маршрута, которая проходит по средним линиям полос, будет равна примерно \n. Каждый маневр отклонения за пассажиром обойдется в среднем \n единицами дополнительного пути, что в сумме удлинит маршрут примерно на \n. Таким образом средняя длина обхода стартовой клетки составит \n. \n\r\n \n\r\n\n\r\n\nрис 13\n\r\n \n\r\nБудем считать, что клетка \n разделена на такие же вертикальные полосы, что и клетка \n. Должно быть очевидно, что когда машина межклеточного такси достигнет \n, она сможет доставить своих пассажиров в нужные им пункты назначения, действуя по точно такому же алгоритму, что и во время их собора. После того, как эта машина высадит всех своих клиентов и доберется до точки \n в конце последней полосы, ее можно назначить на обратный рейс из \n в \n. \n\r\n \n\r\n\n4.4 Средняя длинна кратчайшего ступенчатого пути между двумя случайными точками прямоугольника\n\r\nПусть у нас есть прямоугольник \n с горизонтальной стороной длины \n и вертикальной — длины \n. Под ступенчатыми кривыми внутри \n мы будем понимать ломанные линии (кусочно линейные кривые), каждый сегмент которых является либо горизонтальным, либо вертикальным отрезком. Возьмем внутри \n две произвольные точки \n и \n. Для дальнейшего исследования нам понадобится знать ответит на следующие два вопроса. \n\r\n\n\r\nПервый состоит в том, чтобы описать, какие ступенчатые кривые из \n в \n будут иметь наименьшую длину. Второй — это, чему будет равна средняя длина таких кривых, если точки \n и \n выбираются внутри \n случайно и независимо друг от друга, а вероятность, которая описывает этот выбор, равномерно распределена по \n. \n\r\n \n\r\nЧтобы ответить на первый вопрос, на всякий ступенчатый путь из \n в \n будем смотреть как на цепочку векторов, в которой начало каждого следующего вектора совмещено с концом предыдущего. Пусть \n и \n — это проекции точек \n и \n на нижнюю сторону \n, а \n и \n — их проекции на левую сторону \n. Можно видеть, что если \n — произвольный ступенчатый путь из \n в \n, то проекции всех его горизонтальных звеньев в сумме дадут вектор \n, а проекции всех вертикальных звеньев — вектор \n. \n\r\n \n\r\n\n\r\n\nрис 14\n\r\n \n\r\nВ том и только в том случае, когда все горизонтальные звенья \n имеют одно и тоже направление сумма их длин будет равна длине вектора \n. Аналогично, в том и только в том случае, когда все вертикальные звенья \n имеют одно и тоже направление сумма их длин будет равна длине \n. Ступенчатые пути, у которых и все горизонтальные, и все вертикальные звенья ориентированы одинаково, договоримся называть монотонными. Таким образом, ступенчатый путь будет кратчайшим в том и только в том случае, когда он является монотонным. \n\r\n \n\r\nЗаймемся теперь вторым вопросом. Пусть точки \n и \n выбраны из прямоугольника \n случайно и независимо друг от друга. Мы знаем, что длина любой кратчайшей ступенчатой кривой из \n в \n равна сумме длин проекций отрезка \n на нижнюю и левую стороны \n. Следовательно, чтобы посчитать среднюю длину таких кривых, достаточно вычислить, чему равна средняя длина отрезков \n и \n. \n\r\n \n\r\nМожно показать, да и это почти очевидно, что равномерная распределенность и независимость выбора точек \n и \n внутри \n влечет за собой равномерную распределенность и независимость случайного положения их проекций на каждой из сторон \n. Давайте тогда посчитаем, чему равно среднее расстояние между двумя случайно выбранными точками \n и \n на отрезке \n длины \n. Поскольку результат, очевидно, пропорционален \n, достаточно рассмотреть случай, когда \n. \n\r\n \n\r\nПусть \n и \n — это то, насколько точки \n и \n удалены от левого конца \n. В таком случае пара \n полностью кодирует выбор \n и \n, а вероятность иметь ту или иную пару \n оказывается равномерно распределена внутри единичного квадрата декартовой плоскости. \n\r\n\n\r\n\n\r\n\nрис 15\n\r\n \n\r\nРасстояние между \n и \n описывается функцией \n, ее график состоит из двух одинаковых пирамид высоты \n и площадью оснований \n у каждой. Среднее расстояние между \n и \n равно среднему значению высоты графика \n, то есть суммарному объему пирамид, деленному на суммарную площадь их оснований. Объем пирамиды равна трети произведения площади основания на высоту, таким образом, среднее расстояние между двумя случайными точками отрезка длины \n равно \n, а среднее расстояние между двумя случайными точками прямоугольника размера \n равно \n. \n\r\n \n\r\n\nУпражнение: \nпокажите что в прямоугольнике размера \n средняя длина кратчайшей ступенчатой кривой, построенной между случайно выбранной точкой и центром прямоугольника равна \n, а между случайно выбранной точкой и его углом — \n. \n\r\n \n\r\n\n4.5 Средняя продолжительность путешествия на межклеточном такси\n\r\nЕсли все путешествия в городе совершаются на личных автомобилях, то маршруты большинства из них могут быть проложены по кратчайшей ступенчатой кривой. Средняя длина поездок в этом случае будет близка к \n, а продолжительность к \n. Какими окажутся средняя длина и средняя продолжительность путешествий, если все жители города будут совершать их на межклеточном такси? \n\r\n \n\r\nПусть некоторому путешественнику предстоит доехать на межклеточном такси от некоторого перекрёстка \n в квадрате \n до некоторого перекрестка \n в квадрате \n. Разделим его будущий маршрут на три участка: начальный — внутри \n, средний — между ближайшими друг к другу углами \n и \n, и финальный — внутри \n. Начальный и финальный участки — это часть змеевидного пути, которым машина такси объезжает клетки \n и \n. При случайном положении перекрестков \n и \n путешественник проедет в среднем примерно половину каждой змейки, таким образом средняя длина начального и конечного участков его маршрута составит примерно \n каждый. Это приближение будет работать, если число пассажиров n, которое за раз перевозит машина, достаточно велико. \n\r\n \n\r\nЧтобы оценить среднюю длину среднего участка, предположим, что размер клеток на которые поделен город, много меньше размера самого города, то есть \n. Если это так, то сами клетки \n в масштабе города выглядят как точки, а значит среднее расстояние между ними с точностью до величины порядка \n равно \n. Получается, что при сравнительно больших \n и сравнительно малых \n поездки по городу на межклеточном такси будут в среднем примерно на \n длинней поездок на личном автомобиле. \n\r\n\n\r\nСреднее время, которое займет путешествие по городу на межклеточном такси можно найти как “средняя длина поездки, деленная на среднюю скорость, плюс среднее время ожидания транспорта”. Среднюю длину поездки мы оценили как \n. Давайте пренебрежем временем разгона/торможения, временем посадки и высадки и прочими несущественными задержками в пути, с которыми сталкиваются пассажиры и будем считать, что средняя скорость машины такси близка к разрешенной в городе скорости v. Далее, мы будем предполагать, что машины такси, которые курсируют между парой клеток, следуют друг за другом с интервалом \n. Если так, то то человеку, который только что решил из клетки \n поехать в клетку \n, подходящей машины придется ждать в среднем примерно \n единиц времени. Собирая все вместе, получаем, что среднее время путешествия на межклеточном такси примерно равно \n\r\n \n\r\n\n,\n\r\n\n\r\nчто на \n\r\n\n\r\n\n\r\n\n\r\nдольше среднего времени путешествия на личном автомобиле. \n\r\n \n\r\n\n4.6 Среднее число пассажиров в салоне\n\r\nКак много пассажиров перевозит машина межклеточного такси за раз? Пусть в области единичной площади за единичное время намерение совершить любое путешествие по городу возникает в среднем у \n людей. За время \n, то есть за время равное интервалу между машинами, курсирующими между \n и \n, внутри клетки \n такое намерение появится в среднем у \n человек. Однако путь не всех из них будет лежать в клетку \n. Вероятность, что случайно взятое путешествие закончится в клетке \n, равна \n, то есть отношению площади этой клетки к площади всего города. В итоге мы имеем, что на каждую машину, курсирующую между \n и \n будет стремиться попасть в среднем: \n\r\n \n\r\n\n\r\n\n\r\nпутешественников. \n\r\n \n\r\nНаписанная выше формула ожидаемо показывает, что чем на большего размера клетки мы поделим город и чем больший интервал движения установим для курсирующих между этими клетками машин такси, тем большее число пассажиров каждая из них будет перевозить за раз. Однако мы не можем размер клеток \n и интервал движения \n сделать чересчур большими, иначе поездка на межклеточном такси станет чересчур долгой. Потребуем, чтобы среднее время путешествий на межклеточном такси отличалось от среднего времени путешествий на личном автомобиле не более чем в $inline$(1 + \\lamda)$inline$ раз. Это требование приводит нас к неравенству \n\r\n \n\r\n\n,\n\r\n\n\r\nоткуда \n\r\n \n\r\n\n,\n\r\n\n\r\nили в предельном случае \n\r\n \n\r\n\n. \n\r\n \n\r\nПодставляя в \n выражение для \n, получаем уравнение связи параметров \n, \n и \n: \n\r\n \n\r\n\n \n\r\n \n\r\nДавайте найдем такие \n, \n, которые при заданном \n максимизируют величину \n. Для простоты выкладок рассмотри только тот случай, когда город имеет квадратную форму и \n. \n\r\n \n\r\nБрать производные “в лоб” здесь слишком трудоемко, поэтому мы используем одну маленькую уловку. Заметим, что уравнение связи состоит из двух слагаемых. Возьмем произвольное \n и \n от нуля до единицы и распределим между слагаемыми уравнения \n их суммарное значение в отношении \n: \n\r\n \n\r\n\n\r\n \n\r\n\n\r\n \n\r\nОткуда: \n\r\n \n\r\n\n, \n\r\n \n\r\n\n, \n\r\n \n\r\n\n, \n\r\n \n\r\n\n\r\n\n\r\n\n\r\n \n\r\nТеперь мы можем оптимизировать \n по \n и \n. Эти параметры будут оптимальны, когда\n\r\n \n\r\n \n\r\n\n\r\nпри условии, что \n\r\n \n\r\n\n. \n\r\n \n\r\nИз двух написанных выше уравнений тут же следует, что: \n\r\n \n\r\n\n,\n\r\n\n\r\nоткуда \n, \n.\n\r\n \n\r\nПодставляя оптимальные \n и \n в формулы для \n, \n, \n: \n\r\n \n\r\n\n, \n\r\n \n\r\n\n, \n\r\n \n\r\n\n.\n\r\n \n\r\n \n4.7 Оценка для реальных городов\n\r\nДавайте посмотрим, какими будут \n, \n и \n, если взять \n, \n и \n соответствующими настоящим городам, а \n положить равной \n. Величину населения \n, плотность населения \n и разрешенную скорость \n возьмем из энциклопедических страниц. При населении \n и его плотности \n квадратный город будет иметь размер \n. Величину \n, то есть среднее число путешествий, которые стартуют из области единичной площади за единицу времени, мы оценим, исходя из следующих допущений: \n\r\n \n\r\nБудем считать, что каждый житель города совершает в день в среднем \n поездки, причем вся миграционная активность в городе равномерно распределена по \n утренним и \n вечерним часам. В городе размера \n проживает \n человек, за \n минут они совершат \n путешествий, следовательно в периоды миграционной активности из 1-го квадратного километра в минуту должны начинать свое путешествие в среднем \n человек. Перейдем к конкретным примерам. \n\r\n \n\r\nУсловный Нью-Йорк (Лондон, Москва): \n\r\nнаселение \n мл чел, \n\r\nплотность \n чел/кв км, \n\r\nэффективный диаметр \n км, \n\r\nразрешенная скорость \n км/мин \n\r\n\n чел/мин кв км \n\r\n\n чел. \n\r\n\n км, \n\r\n\n мин \n\r\n \n\r\nУсловный Берлин: \n\r\nнаселение \n мл чел, \n\r\nплотность \n чел/кв км, \n\r\nэффективный диаметр \n км, \n\r\nразрешенная скорость \n км/мин \n\r\n\n чел/мин кв км \n\r\n\n чел \n\r\n\n км \n\r\n\n мин \n\r\n \n\r\nУсловный Париж: \n\r\nнаселение \n мл чел, \n\r\nплотность \n чел/кв км, \n\r\nэффективный диаметр \n км, \n\r\nразрешенная скорость \n км/мин \n\r\n\n чел/мин кв км \n\r\n\n чел \n\r\n\n км, \n\r\n\n мин \n\r\n \n\r\nУсловная Прага: \n\r\nнаселение \n мл чел, \n\r\nплотность \n чел/кв км, \n\r\nэффективный диаметр \n км, \n\r\nразрешенная скорость \n км/мин \n\r\n\n чел/мин кв км \n\r\n\n чел \n\r\n\n км, \n\r\n\n мин \n\r\n \n\r\n\n4.8 Критика\n\r\nОценки, которые мы получили выше, показывают, что идея совместных поездок в теории имеет право на жизнь (Uber таки сделать можно) и должна быть исследована лучше. Что касается межклеточного такси, то его схема хороша как отправная точка для исследований, однако для практической реализации подходит плохо. В качестве главных причин ее прикладной бесполезности можно назвать следующие: \n\r\n1) только в очень больших городах попутчиков будет достаточно, чтобы наполнить какой-нибудь очень маленький автобус, а значит массовым транспортом межклеточное такси считать никак нельзя; \n\r\n2) утверждение о том, что путешествовать по городу на межклеточном такси в среднем не более чем в \n времязатратнее, чем на личном автомобиле, справедливо только при условии, что пункт назначения выбирается каждый раз случайно. Если изо дня в день вы собираетесь ездить на межклеточном такси между соседними квадратами, то быстрее будет ходить пешком. \n\r\n \n\r\nВ следующих частях мы построим беспересадочные схемы движения общественного транспорта, которые полностью преодолевают проблему 2) и в значительной степени 1), но пригодны они будут только в городах с населением выше миллиона. Рассмотрим потому одно интересное решение, которое может быть эффективно работать в городах поменьше. \n\r\n \n\r\n\n5. Совместное такси с одной пересадкой\n \n\r\n\n \n\r\n\n5.1 Наводящие рассуждения\n \n\r\nПусть город имеет квадратную форму со стороной в \nкм и заселен с плотностью \n человек на квадратный километр. С такими вводными в городе будут проживать примерно \n тысяч человек, то есть, его нельзя назвать маленьким. Средняя длина путешествия в нем составит \n, а максимальная — \nкм. \n\r\n \n\r\nЕсли разрешенную скорость движения в этом городе установить равной \n км/ч (\n км/мин), то формула для оптимизированного количества попутчиков в межклеточном такси даст нам \n\r\n \n\r\n\n чел. \n\r\n \n\r\nМожем ли мы как-то увеличить это число? \n\r\n \n\r\nЧтобы было проще догадаться, как это можно сделать, немного поменяем регламент движения машин такси. Во-первых будем считать, что через центр каждой клетки \n проходит вертикальная и горизонтальная уличные дороги и между клетками машины такси перемещаются только по ним. Во-вторых потребуем, чтобы от стартовой к финишной клетке машина двигалась по \n — образному пути, причем из двух таких путей она выбирала тот, который начинается с горизонтального участка. \n\r\n \n\r\nЕсли мы будем наблюдать за машинами такси, которые везут пассажиров из клетки \n в клетки \n-го столбца, то увидим, что у них у всех имеется общий участок пути: из центра \n к центру \n. Почему бы тогда путешественников, которые направляются из \n в клетки \n-го столбца, не довезти до центра \n одним общим автобусом, а там уже что-нибудь придумать. Давайте так и поступим. \n\r\n \n\r\n\n\r\n\n\r\n\nрис 16\n\r\n \n\r\n\n5.2 Регламент движения машин\n\r\nИ так, для каждой клетки \n \n-той строки у нас есть отдельный парк машин, единственное назначение которого — собирать внутри этой клетки всех путешественников, чьи точки назначения лежат в \n-том столбце, и отвозят их в центр клетки \n. Таким образом сейчас весь поток путешественников из \n-той строки в \n-тый столбец, скапливается в центре клетки \n. Следующий шаг очевиден: в каждой клетке \n \n-го столбца нужно завести в свой отдельный парк машин, единственной задачей которого будет забирать путешественников из центра \n и развозить их змейкой по клетке \n. \n\r\n \n\r\nЕсли мы масштабируем описанные только что правила на все строки и все столбцы решетки \n, то получим схему движения совместного такси, которая позволяет путешественнику добраться от любого перекрестка к любому перекрестку всего с одной промежуточной пересадкой. Однако эта схема движения еще не совсем эффективна. \n\r\n \n\r\nДействительно, внутри такой схемы все машины совместного такси оказываются распределены по двум ролям: одни только собирают путешественников со стартовых позиций — назовем такие машины собирающими, другие — только доставляют их до точек назначения — назовем их доставляющими. Когда собирающая машина достигает места пересадки, она высаживает всех своих пассажиров и возвращается в домашнюю клетку пустой. Аналогично после того, как доставляющая машина очередной раз развезла всех своих пассажиров по ее домашней клетке, за следующими пассажирами в точку пересадки она едет тоже совершенно пустой. \n\r\n \n\r\nМожем ли мы оптимизировать схему так, чтобы все машины ездили только заполненными? Оказывается, что да. Для этого установим взаимно-однозначное соответствие между множествами клеток \n-той строки и \n-того столбца, положив, что клетке \n соответствует клетка \n. Далее, установим правило, что всякий раз, когда собирающая машина клетки \n и столбца \n достигает центра \n, она высаживает своих пассажиров после чего превращается в доставляющую машину \n-той строкой и клетки \n. В своей новой роли эта машина может тут же загружать ожидающих ее здесь путешественников и везти их в клетку \n. Аналогично установим правило, что всякий раз, когда доставляющая машина \n-той строки и клетки \n высаживает последнего своего клиента, она становится собирающей между этой клеткой и столбцом \n.\n\r\n \n\r\nБлагодаря действию двух новых правил машины совместного такси будут ездить всегда заполненными. Маршрут каждой такой машины будет описывать “круг”: из “домашней” клетки \n на пересадочную остановку в центре \n, оттуда во вторую “домашнюю” клетку \n, далее на пересадочную остановку в центре \n, после которой снова в \n (рисунок 17). \n\r\n \n\r\n\n\r\n\nрис 17\n\r\n \n\r\n\n5.3 Задержка в пути и число пассажиров в салоне\n \n\r\nМаршруты путешествий на такси с одной пересадкой, если не считать дополнительной пересадки, остались почти такими же, как и у путешествий на межклеточном такси. Осталась прежней и средняя задержка от прохождения змеевидных участков внутри стартовой и финишной клеток, равная \n\r\n \n\r\n\n,\n\r\n \n\r\nа вот среднее время, проведенное на остановке в ожидании подходящей машины удвоилось (ждать нужно два раза) и равно теперь \n\r\n \n\r\n \n. \n\r\n \n\r\nПодсчитаем теперь ожидаемое число пассажиров в салоне. Когда машина выполняет роль доставляющей между клеткой \n и столбцом \n, то во время обхода \n должна собрать в среднем \n\r\n \n\r\n\n\r\n \n\r\nЕсли мы хотим, чтобы путешествия на такси с одной пересадкой были дольше путешествий на личном автомобиле в среднем не более чем в \n раз, то должны написать неравенство: \n\r\n \n\r\n\n. \n\r\n \n\r\nЧтобы оптимизировать \n, положим \n\r\n \n\r\n\n, \n\r\n \n\r\n\n,\n\r\n\n\r\nгде \n\r\n \n\r\n\n\r\n \n\r\n\n. \n\r\n \n\r\nПосле преобразований имеем: \n\r\n \n\r\n\n,\n\r\n\n\r\nоткуда \n\r\n \n\r\n\n\r\n \n\r\nсоответственно \n\r\n \n\r\n\n\r\n \n\r\nНа вскидку \n, \n должны максимизировать \n, если так, то окончательный вид формул будет таким: \n\r\n \n\r\n\n, \n\r\n\n \n\r\n\n\r\n\n\r\n\n5.4 Оценки\n\r\nДавайте посмотрим, какими будут значения \n, \n и \n у такси с одной пересадкой в уже знакомых нам городах при значении \n. \n\r\n \n\r\nУсловный Нью-Йорк (Лондон, Москва): \n\r\nэффективный диаметр \n км, \n\r\nразрешенная скорость \n км/мин \n\r\n\n чел/мин кв км \n\r\n\n чел. \n\r\n\n км \n\r\n\n мин \n\r\n\n\r\nУсловный Берлин: \n\r\nэффективный диаметр \n км, \n\r\nразрешенная скорость \n км/мин \n\r\n\n чел/мин кв км \n\r\n\n чел \n\r\n\n км \n\r\n\n мин \n\r\n \n\r\nУсловный Париж: \n\r\nэффективный диаметр \n, \n\r\nразрешенная скорость \n км/мин \n\r\n\nчел/мин кв км \n\r\n\n чел \n\r\n\n км, \n\r\n\n мин \n\r\n \n\r\n Условная Прага: \n\r\nэффективный диаметр \n км, \n\r\nразрешенная скорость \n км/мин \n\r\n\n чел/мин кв км \n\r\n\n чел \n\r\n\n км, \n\r\n\n мин \n\r\n \n\r\nУсловный стандартный полумиллионный город. \n\r\nнаселение \n чел, \n\r\nплотность \n чел/кв км, \n\r\nэффективный диаметр \n км, \n\r\nразрешенная скорость \n км/мин \n\r\n\n чел/мин кв км \n\r\n\n чел \n\r\n\n км, \n\r\n\n мин \n\r\n \n\r\n\n5.5 Критика\n\r\nИз приведенных выше оценок видно, что средняя загрузка машин такси с одной пересадкой при прочих равных примерно вдвое больше средней загрузки машин межклеточного такси. Но! \n\r\n \n\r\nКак и межклеточное такси, такси с одной пересадкой оказывается чересчур медленным транспортом, если все ваши путешествия вы совершаете между близко расположенными клетками. Как и межклеточное такси, схема такси с одной пересадкой, в том виде, в котором она представлена здесь не рассчитана на практическое внедрение: в следующих частях мы познакомимся с ее более совершенными реализациями.\n\r\n\n\r\nДавайте начнем дискуссию, а через две-три недели я закончу редактировать и опубликую вторую и еще через две-три недели и третью части. Если у вас есть желание обсудить что-то детально, вы можете написать мне письмо на адрес magnolia@bk.ru.\n\r\n\n\r\nСергей Коваленко,\n\r\nапрель 2023г.\n \n ",
    "tags": [
        "такси",
        "uber",
        "совместные поездки",
        "общественный транспорт"
    ]
}